/*!
 * Leapstrap v3.0.0 by Alex Wilkes
 * Copyright 2013 Twitter, Inc.
 * Licensed under http://www.apache.org/licenses/LICENSE-2.0
 */
if("undefined"==typeof jQuery)throw new Error("Bootstrap requires jQuery");!function(a,b,c){function d(c,f){if(!b[c]){if(!a[c]){var g="function"==typeof require&&require;if(!f&&g)return g(c,!0);if(e)return e(c,!0);throw new Error("Cannot find module '"+c+"'")}var h=b[c]={exports:{}};a[c][0].call(h.exports,function(b){var e=a[c][1][b];return d(e?e:b)},h,h.exports)}return b[c].exports}for(var e="function"==typeof require&&require,f=0;f<c.length;f++)d(c[f]);return d}({1:[function(a,b){var c=a("./protocol").chooseProtocol,d=a("events").EventEmitter,e=a("underscore"),f=b.exports=function(a){this.opts=e.defaults(a||{},{host:"127.0.0.1",enableGestures:!1,port:6437,enableHeartbeat:!0,heartbeatInterval:100,requestProtocolVersion:3}),this.host=this.opts.host,this.port=this.opts.port,this.on("ready",function(){this.enableGestures(this.opts.enableGestures),this.opts.enableHeartbeat&&this.startHeartbeat()}),this.on("disconnect",function(){this.opts.enableHeartbeat&&this.stopHeartbeat()}),this.heartbeatTimer=null};f.prototype.getUrl=function(){return"ws://"+this.host+":"+this.port+"/v"+this.opts.requestProtocolVersion+".json"},f.prototype.sendHeartbeat=function(){this.protocol&&(this.setHeartbeatState(!0),this.protocol.sendHeartbeat(this))},f.prototype.handleOpen=function(){this.connected||(this.connected=!0,this.emit("connect"))},f.prototype.enableGestures=function(a){this.gesturesEnabled=a?!0:!1,this.send(this.protocol.encode({enableGestures:this.gesturesEnabled}))},f.prototype.handleClose=function(){this.connected&&(this.disconnect(),this.startReconnection())},f.prototype.startReconnection=function(){var a=this;this.reconnectionTimer=setInterval(function(){a.reconnect()},1e3)},f.prototype.disconnect=function(){this.socket&&(this.socket.close(),delete this.socket,delete this.protocol,this.connected&&(this.connected=!1,this.emit("disconnect")))},f.prototype.reconnect=function(){this.connected?clearInterval(this.reconnectionTimer):(this.disconnect(),this.connect())},f.prototype.handleData=function(a){var b,d=JSON.parse(a);void 0===this.protocol?(b=this.protocol=c(d),this.emit("ready")):b=this.protocol(d),this.emit(b.type,b)},f.prototype.connect=function(){return this.socket?void 0:(this.socket=this.setupSocket(),!0)},f.prototype.send=function(a){this.socket.send(a)},f.prototype.stopHeartbeat=function(){this.heartbeatTimer&&(clearInterval(this.heartbeatTimer),delete this.heartbeatTimer,this.setHeartbeatState(!1))},f.prototype.setHeartbeatState=function(a){this.heartbeatState!==a&&(this.heartbeatState=a,this.emit(this.heartbeatState?"focus":"blur"))},e.extend(f.prototype,d.prototype)},{"./protocol":12,events:17,underscore:20}],2:[function(a,b){var c=b.exports=function(a){this.pos=0,this._buf=[],this.size=a};c.prototype.get=function(a){return void 0==a&&(a=0),a>=this.size?void 0:a>=this._buf.length?void 0:this._buf[(this.pos-a-1)%this.size]},c.prototype.push=function(a){return this._buf[this.pos%this.size]=a,this.pos++}},{}],3:[function(a,b){var c=b.exports=a("./base_connection");c.prototype.setupSocket=function(){var a=this,b=new WebSocket(this.getUrl());return b.onopen=function(){a.handleOpen()},b.onmessage=function(b){a.handleData(b.data)},b.onclose=function(){a.handleClose()},b},c.prototype.startHeartbeat=function(){if(this.protocol.sendHeartbeat&&!this.heartbeatTimer){var a=this,b=null;b="undefined"!=typeof document.hidden?"hidden":"undefined"!=typeof document.mozHidden?"mozHidden":"undefined"!=typeof document.msHidden?"msHidden":"undefined"!=typeof document.webkitHidden?"webkitHidden":void 0;var c=!0,d=window.addEventListener("focus",function(){c=!0}),e=window.addEventListener("blur",function(){c=!1});this.on("disconnect",function(){a.heartbeatTimer&&(clearTimeout(a.heartbeatTimer),delete a.heartbeatTimer),window.removeEventListener("focus",d),window.removeEventListener("blur",e)}),this.heartbeatTimer=setInterval(function(){var d=void 0===b?!0:document[b]===!1;d&&c?a.sendHeartbeat():a.setHeartbeatState(!1)},this.opts.heartbeatInterval)}}},{"./base_connection":1}],4:[function(a,b){!function(c){var d=a("./frame"),e=a("./circular_buffer"),f=a("./pipeline"),g=a("events").EventEmitter,h=a("./gesture").gestureListener,i=a("underscore"),j=b.exports=function(b){var f="undefined"!=typeof c&&"node"===c.title;b=i.defaults(b||{},{inNode:f}),this.inNode=b.inNode,b=i.defaults(b||{},{frameEventName:this.useAnimationLoop()?"animationFrame":"deviceFrame",suppressAnimationLoop:!1}),this.suppressAnimationLoop=b.suppressAnimationLoop,this.frameEventName=b.frameEventName,this.history=new e(200),this.lastFrame=d.Invalid,this.lastValidFrame=d.Invalid,this.lastConnectionFrame=d.Invalid,this.accumulatedGestures=[],this.connectionType=void 0===b.connectionType?this.inBrowser()?a("./connection"):a("./node_connection"):b.connectionType,this.connection=new this.connectionType(b),this.setupConnectionEvents()};j.prototype.gesture=function(a,b){var c=h(this,a);return void 0!==b&&c.stop(b),c},j.prototype.inBrowser=function(){return!this.inNode},j.prototype.useAnimationLoop=function(){return this.inBrowser()&&"undefined"==typeof chrome},j.prototype.connect=function(){var a=this;if(this.connection.connect()&&this.inBrowser()&&!a.suppressAnimationLoop){var b=function(){a.emit("animationFrame",a.lastConnectionFrame),window.requestAnimationFrame(b)};window.requestAnimationFrame(b)}},j.prototype.disconnect=function(){this.connection.disconnect()},j.prototype.frame=function(a){return this.history.get(a)||d.Invalid},j.prototype.loop=function(a){switch(a.length){case 1:this.on(this.frameEventName,a);break;case 2:var b=this,c=function(d){a(d,function(){b.lastFrame!=d?c(b.lastFrame):b.once(b.frameEventName,c)})};this.once(this.frameEventName,c)}this.connect()},j.prototype.addStep=function(a){this.pipeline||(this.pipeline=new f(this)),this.pipeline.addStep(a)},j.prototype.processFrame=function(a){a.gestures&&(this.accumulatedGestures=this.accumulatedGestures.concat(a.gestures)),this.pipeline&&(a=this.pipeline.run(a),a||(a=d.Invalid)),this.lastConnectionFrame=a,this.emit("deviceFrame",a)},j.prototype.processFinishedFrame=function(a){if(this.lastFrame=a,a.valid&&(this.lastValidFrame=a),a.controller=this,a.historyIdx=this.history.push(a),a.gestures){a.gestures=this.accumulatedGestures,this.accumulatedGestures=[];for(var b=0;b!=a.gestures.length;b++)this.emit("gesture",a.gestures[b],a)}this.emit("frame",a)},j.prototype.setupConnectionEvents=function(){var a=this;this.connection.on("frame",function(b){a.processFrame(b)}),this.on(this.frameEventName,function(b){a.processFinishedFrame(b)}),this.connection.on("disconnect",function(){a.emit("disconnect")}),this.connection.on("ready",function(){a.emit("ready")}),this.connection.on("connect",function(){a.emit("connect")}),this.connection.on("focus",function(){a.emit("focus")}),this.connection.on("blur",function(){a.emit("blur")}),this.connection.on("protocol",function(b){a.emit("protocol",b)}),this.connection.on("deviceConnect",function(b){a.emit(b.state?"deviceConnected":"deviceDisconnected")})},i.extend(j.prototype,g.prototype)}(a("__browserify_process"))},{"./circular_buffer":2,"./connection":3,"./frame":5,"./gesture":6,"./node_connection":16,"./pipeline":10,__browserify_process:18,events:17,underscore:20}],5:[function(a,b){var c=a("./hand"),d=a("./pointable"),e=a("./gesture").createGesture,f=a("gl-matrix"),g=f.mat3,h=f.vec3,i=a("./interaction_box"),j=a("underscore"),k=b.exports=function(a){this.valid=!0,this.id=a.id,this.timestamp=a.timestamp,this.hands=[],this.handsMap={},this.pointables=[],this.tools=[],this.fingers=[],a.interactionBox&&(this.interactionBox=new i(a.interactionBox)),this.gestures=[],this.pointablesMap={},this._translation=a.t,this._rotation=j.flatten(a.r),this._scaleFactor=a.s,this.data=a,this.type="frame",this.currentFrameRate=a.currentFrameRate;for(var b={},f=0,g=a.hands.length;f!=g;f++){var h=new c(a.hands[f]);h.frame=this,this.hands.push(h),this.handsMap[h.id]=h,b[h.id]=f}for(var k=0,l=a.pointables.length;k!=l;k++){var m=new d(a.pointables[k]);if(m.frame=this,this.pointables.push(m),this.pointablesMap[m.id]=m,(m.tool?this.tools:this.fingers).push(m),void 0!==m.handId&&b.hasOwnProperty(m.handId)){var h=this.hands[b[m.handId]];h.pointables.push(m),(m.tool?h.tools:h.fingers).push(m)}}if(a.gestures)for(var n=0,o=a.gestures.length;n!=o;n++)this.gestures.push(e(a.gestures[n]))};k.prototype.tool=function(a){var b=this.pointable(a);return b.tool?b:d.Invalid},k.prototype.pointable=function(a){return this.pointablesMap[a]||d.Invalid},k.prototype.finger=function(a){var b=this.pointable(a);return b.tool?d.Invalid:b},k.prototype.hand=function(a){return this.handsMap[a]||c.Invalid},k.prototype.rotationAngle=function(a,b){if(!this.valid||!a.valid)return 0;var c=this.rotationMatrix(a),d=.5*(c[0]+c[4]+c[8]-1),e=Math.acos(d);if(e=isNaN(e)?0:e,void 0!==b){var f=this.rotationAxis(a);e*=h.dot(f,h.normalize(h.create(),b))}return e},k.prototype.rotationAxis=function(a){return this.valid&&a.valid?h.normalize(h.create(),[this._rotation[7]-a._rotation[5],this._rotation[2]-a._rotation[6],this._rotation[3]-a._rotation[1]]):h.create()},k.prototype.rotationMatrix=function(a){if(!this.valid||!a.valid)return g.create();var b=g.transpose(g.create(),this._rotation);return g.multiply(g.create(),a._rotation,b)},k.prototype.scaleFactor=function(a){return this.valid&&a.valid?Math.exp(this._scaleFactor-a._scaleFactor):1},k.prototype.translation=function(a){return this.valid&&a.valid?h.subtract(h.create(),this._translation,a._translation):h.create()},k.prototype.toString=function(){var a="Frame [ id:"+this.id+" | timestamp:"+this.timestamp+" | Hand count:("+this.hands.length+") | Pointable count:("+this.pointables.length+")";return this.gestures&&(a+=" | Gesture count:("+this.gestures.length+")"),a+=" ]"},k.prototype.dump=function(){var a="";a+="Frame Info:<br/>",a+=this.toString(),a+="<br/><br/>Hands:<br/>";for(var b=0,c=this.hands.length;b!=c;b++)a+="  "+this.hands[b].toString()+"<br/>";a+="<br/><br/>Pointables:<br/>";for(var d=0,e=this.pointables.length;d!=e;d++)a+="  "+this.pointables[d].toString()+"<br/>";if(this.gestures){a+="<br/><br/>Gestures:<br/>";for(var f=0,g=this.gestures.length;f!=g;f++)a+="  "+this.gestures[f].toString()+"<br/>"}return a+="<br/><br/>Raw JSON:<br/>",a+=JSON.stringify(this.data)},k.Invalid={valid:!1,hands:[],fingers:[],tools:[],gestures:[],pointables:[],pointable:function(){return d.Invalid},finger:function(){return d.Invalid},hand:function(){return c.Invalid},toString:function(){return"invalid frame"},dump:function(){return this.toString()},rotationAngle:function(){return 0},rotationMatrix:function(){return g.create()},rotationAxis:function(){return h.create()},scaleFactor:function(){return 1},translation:function(){return h.create()}}},{"./gesture":6,"./hand":7,"./interaction_box":9,"./pointable":11,"gl-matrix":19,underscore:20}],6:[function(a,b,c){var d=a("gl-matrix"),e=(d.vec3,a("events").EventEmitter),f=a("underscore");c.createGesture=function(a){var b;switch(a.type){case"circle":b=new h(a);break;case"swipe":b=new i(a);break;case"screenTap":b=new j(a);break;case"keyTap":b=new k(a);break;default:throw"unkown gesture type"}return b.id=a.id,b.handIds=a.handIds,b.pointableIds=a.pointableIds,b.duration=a.duration,b.state=a.state,b.type=a.type,b},c.gestureListener=function(a,b){var c={},d={};a.on("gesture",function(a,e){if(a.type==b){if(("start"==a.state||"stop"==a.state)&&void 0===d[a.id]){var h=new g(a,e);d[a.id]=h,f.each(c,function(a,b){h.on(b,a)})}d[a.id].update(a,e),"stop"==a.state&&delete d[a.id]}});var e={start:function(a){return c.start=a,e},stop:function(a){return c.stop=a,e},complete:function(a){return c.stop=a,e},update:function(a){return c.update=a,e}};return e};var g=c.Gesture=function(a,b){this.gestures=[a],this.frames=[b]};g.prototype.update=function(a,b){this.gestures.push(a),this.frames.push(b),this.emit(a.state,this)},f.extend(g.prototype,e.prototype);var h=function(a){this.center=a.center,this.normal=a.normal,this.progress=a.progress,this.radius=a.radius};h.prototype.toString=function(){return"CircleGesture ["+JSON.stringify(this)+"]"};var i=function(a){this.startPosition=a.startPosition,this.position=a.position,this.direction=a.direction,this.speed=a.speed};i.prototype.toString=function(){return"SwipeGesture ["+JSON.stringify(this)+"]"};var j=function(a){this.position=a.position,this.direction=a.direction,this.progress=a.progress};j.prototype.toString=function(){return"ScreenTapGesture ["+JSON.stringify(this)+"]"};var k=function(a){this.position=a.position,this.direction=a.direction,this.progress=a.progress};k.prototype.toString=function(){return"KeyTapGesture ["+JSON.stringify(this)+"]"}},{events:17,"gl-matrix":19,underscore:20}],7:[function(a,b){var c=a("./pointable"),d=a("gl-matrix"),e=d.mat3,f=d.vec3,g=a("underscore"),h=b.exports=function(a){this.id=a.id,this.palmPosition=a.palmPosition,this.direction=a.direction,this.palmVelocity=a.palmVelocity,this.palmNormal=a.palmNormal,this.sphereCenter=a.sphereCenter,this.sphereRadius=a.sphereRadius,this.valid=!0,this.pointables=[],this.fingers=[],this.tools=[],this._translation=a.t,this._rotation=g.flatten(a.r),this._scaleFactor=a.s,this.timeVisible=a.timeVisible,this.stabilizedPalmPosition=a.stabilizedPalmPosition};h.prototype.finger=function(a){var b=this.frame.finger(a);return b&&b.handId==this.id?b:c.Invalid},h.prototype.rotationAngle=function(a,b){if(!this.valid||!a.valid)return 0;var c=a.hand(this.id);if(!c.valid)return 0;var d=this.rotationMatrix(a),e=.5*(d[0]+d[4]+d[8]-1),g=Math.acos(e);if(g=isNaN(g)?0:g,void 0!==b){var h=this.rotationAxis(a);g*=f.dot(h,f.normalize(f.create(),b))}return g},h.prototype.rotationAxis=function(a){if(!this.valid||!a.valid)return f.create();var b=a.hand(this.id);return b.valid?f.normalize(f.create(),[this._rotation[7]-b._rotation[5],this._rotation[2]-b._rotation[6],this._rotation[3]-b._rotation[1]]):f.create()},h.prototype.rotationMatrix=function(a){if(!this.valid||!a.valid)return e.create();var b=a.hand(this.id);if(!b.valid)return e.create();var c=e.transpose(e.create(),this._rotation),d=e.multiply(e.create(),b._rotation,c);return d},h.prototype.scaleFactor=function(a){if(!this.valid||!a.valid)return 1;var b=a.hand(this.id);return b.valid?Math.exp(this._scaleFactor-b._scaleFactor):1},h.prototype.translation=function(a){if(!this.valid||!a.valid)return f.create();var b=a.hand(this.id);return b.valid?[this._translation[0]-b._translation[0],this._translation[1]-b._translation[1],this._translation[2]-b._translation[2]]:f.create()},h.prototype.toString=function(){return"Hand [ id: "+this.id+" | palm velocity:"+this.palmVelocity+" | sphere center:"+this.sphereCenter+" ] "},h.prototype.pitch=function(){return Math.atan2(this.direction[1],-this.direction[2])},h.prototype.yaw=function(){return Math.atan2(this.direction[0],-this.direction[2])},h.prototype.roll=function(){return Math.atan2(this.palmNormal[0],-this.palmNormal[1])},h.Invalid={valid:!1,fingers:[],tools:[],pointables:[],pointable:function(){return c.Invalid},finger:function(){return c.Invalid},toString:function(){return"invalid frame"},dump:function(){return this.toString()},rotationAngle:function(){return 0},rotationMatrix:function(){return e.create()},rotationAxis:function(){return f.create()},scaleFactor:function(){return 1},translation:function(){return f.create()}}},{"./pointable":11,"gl-matrix":19,underscore:20}],8:[function(a,b){!function(){b.exports={Controller:a("./controller"),Frame:a("./frame"),Gesture:a("./gesture"),Hand:a("./hand"),Pointable:a("./pointable"),InteractionBox:a("./interaction_box"),Connection:a("./connection"),CircularBuffer:a("./circular_buffer"),UI:a("./ui"),glMatrix:a("gl-matrix"),mat3:a("gl-matrix").mat3,vec3:a("gl-matrix").vec3,loopController:void 0,loop:function(a,b){return void 0===b&&(b=a,a={}),this.loopController||(this.loopController=new this.Controller(a)),this.loopController.loop(b),this.loopController}}}()},{"./circular_buffer":2,"./connection":3,"./controller":4,"./frame":5,"./gesture":6,"./hand":7,"./interaction_box":9,"./pointable":11,"./ui":13,"gl-matrix":19}],9:[function(a,b){var c=a("gl-matrix"),d=c.vec3,e=b.exports=function(a){this.valid=!0,this.center=a.center,this.size=a.size,this.width=a.size[0],this.height=a.size[1],this.depth=a.size[2]};e.prototype.denormalizePoint=function(a){return d.fromValues((a[0]-.5)*this.size[0]+this.center[0],(a[1]-.5)*this.size[1]+this.center[1],(a[2]-.5)*this.size[2]+this.center[2])},e.prototype.normalizePoint=function(a,b){var c=d.fromValues((a[0]-this.center[0])/this.size[0]+.5,(a[1]-this.center[1])/this.size[1]+.5,(a[2]-this.center[2])/this.size[2]+.5);return b&&(c[0]=Math.min(Math.max(c[0],0),1),c[1]=Math.min(Math.max(c[1],0),1),c[2]=Math.min(Math.max(c[2],0),1)),c},e.prototype.toString=function(){return"InteractionBox [ width:"+this.width+" | height:"+this.height+" | depth:"+this.depth+" ]"},e.Invalid={valid:!1}},{"gl-matrix":19}],10:[function(a,b){var c=b.exports=function(){this.steps=[]};c.prototype.addStep=function(a){this.steps.push(a)},c.prototype.run=function(a){for(var b=this.steps.length,c=0;c!=b&&a;c++)a=this.steps[c](a);return a}},{}],11:[function(a,b){var c=a("gl-matrix");c.vec3;var d=b.exports=function(a){this.valid=!0,this.id=a.id,this.handId=a.handId,this.length=a.length,this.tool=a.tool,this.width=a.width,this.direction=a.direction,this.stabilizedTipPosition=a.stabilizedTipPosition,this.tipPosition=a.tipPosition,this.tipVelocity=a.tipVelocity,this.touchZone=a.touchZone,this.touchDistance=a.touchDistance,this.timeVisible=a.timeVisible};d.prototype.toString=function(){return 1==this.tool?"Pointable [ id:"+this.id+" "+this.length+"mmx | with:"+this.width+"mm | direction:"+this.direction+" ]":"Pointable [ id:"+this.id+" "+this.length+"mmx | direction: "+this.direction+" ]"},d.Invalid={valid:!1}},{"gl-matrix":19}],12:[function(a,b,c){var d=a("./frame"),e=function(a){this.type=a.type,this.state=a.state};c.chooseProtocol=function(a){var b;switch(a.version){case 1:b=f(1,function(a){return new d(a)});break;case 2:b=f(2,function(a){return new d(a)}),b.sendHeartbeat=function(a){a.send(b.encode({heartbeat:!0}))};break;case 3:b=f(3,function(a){return a.event?new e(a.event):new d(a)}),b.sendHeartbeat=function(a){a.send(b.encode({heartbeat:!0}))};break;default:throw"unrecognized version"}return b};var f=function(a,b){var c=b;return c.encode=function(a){return JSON.stringify(a)},c.version=a,c.versionLong="Version "+a,c.type="protocol",c}},{"./frame":5}],13:[function(a,b,c){c.UI={Region:a("./ui/region"),Cursor:a("./ui/cursor")}},{"./ui/cursor":14,"./ui/region":15}],14:[function(a,b){b.exports=function(){return function(a){var b=a.pointables.sort(function(a,b){return a.z-b.z})[0];return b&&b.valid&&(a.cursorPosition=b.tipPosition),a}}},{}],15:[function(a,b){var c=a("events").EventEmitter,d=a("underscore"),e=b.exports=function(a,b){this.start=new Vector(a),this.end=new Vector(b),this.enteredFrame=null};e.prototype.hasPointables=function(a){for(var b=0;b!=a.pointables.length;b++){var c=a.pointables[b].tipPosition;if(c.x>=this.start.x&&c.x<=this.end.x&&c.y>=this.start.y&&c.y<=this.end.y&&c.z>=this.start.z&&c.z<=this.end.z)return!0}return!1},e.prototype.listener=function(a){var b=this;return a&&a.nearThreshold&&this.setupNearRegion(a.nearThreshold),function(a){return b.updatePosition(a)}},e.prototype.clipper=function(){var a=this;return function(b){return a.updatePosition(b),a.enteredFrame?b:null}},e.prototype.setupNearRegion=function(a){var b=this.nearRegion=new e([this.start.x-a,this.start.y-a,this.start.z-a],[this.end.x+a,this.end.y+a,this.end.z+a]),c=this;b.on("enter",function(a){c.emit("near",a)}),b.on("exit",function(a){c.emit("far",a)}),c.on("exit",function(a){c.emit("near",a)})},e.prototype.updatePosition=function(a){return this.nearRegion&&this.nearRegion.updatePosition(a),this.hasPointables(a)&&null==this.enteredFrame?(this.enteredFrame=a,this.emit("enter",this.enteredFrame)):this.hasPointables(a)||null==this.enteredFrame||(this.enteredFrame=null,this.emit("exit",this.enteredFrame)),a},e.prototype.normalize=function(a){return new Vector([(a.x-this.start.x)/(this.end.x-this.start.x),(a.y-this.start.y)/(this.end.y-this.start.y),(a.z-this.start.z)/(this.end.z-this.start.z)])},e.prototype.mapToXY=function(a,b,c){var d=this.normalize(a),e=d.x,f=d.y;return e>1?e=1:-1>e&&(e=-1),f>1?f=1:-1>f&&(f=-1),[(e+1)/2*b,(1-f)/2*c,d.z]},d.extend(e.prototype,c.prototype)},{events:17,underscore:20}],16:[function(){},{}],17:[function(a,b,c){!function(a){function b(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c++)if(b===a[c])return c;return-1}a.EventEmitter||(a.EventEmitter=function(){});var d=c.EventEmitter=a.EventEmitter,e="function"==typeof Array.isArray?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},f=10;d.prototype.setMaxListeners=function(a){this._events||(this._events={}),this._events.maxListeners=a},d.prototype.emit=function(a){if("error"===a&&(!this._events||!this._events.error||e(this._events.error)&&!this._events.error.length))throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");if(!this._events)return!1;var b=this._events[a];if(!b)return!1;if("function"==typeof b){switch(arguments.length){case 1:b.call(this);break;case 2:b.call(this,arguments[1]);break;case 3:b.call(this,arguments[1],arguments[2]);break;default:var c=Array.prototype.slice.call(arguments,1);b.apply(this,c)}return!0}if(e(b)){for(var c=Array.prototype.slice.call(arguments,1),d=b.slice(),f=0,g=d.length;g>f;f++)d[f].apply(this,c);return!0}return!1},d.prototype.addListener=function(a,b){if("function"!=typeof b)throw new Error("addListener only takes instances of Function");if(this._events||(this._events={}),this.emit("newListener",a,b),this._events[a])if(e(this._events[a])){if(!this._events[a].warned){var c;c=void 0!==this._events.maxListeners?this._events.maxListeners:f,c&&c>0&&this._events[a].length>c&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),console.trace())}this._events[a].push(b)}else this._events[a]=[this._events[a],b];else this._events[a]=b;return this},d.prototype.on=d.prototype.addListener,d.prototype.once=function(a,b){var c=this;return c.on(a,function d(){c.removeListener(a,d),b.apply(this,arguments)}),this},d.prototype.removeListener=function(a,c){if("function"!=typeof c)throw new Error("removeListener only takes instances of Function");if(!this._events||!this._events[a])return this;var d=this._events[a];if(e(d)){var f=b(d,c);if(0>f)return this;d.splice(f,1),0==d.length&&delete this._events[a]}else this._events[a]===c&&delete this._events[a];return this},d.prototype.removeAllListeners=function(a){return 0===arguments.length?(this._events={},this):(a&&this._events&&this._events[a]&&(this._events[a]=null),this)},d.prototype.listeners=function(a){return this._events||(this._events={}),this._events[a]||(this._events[a]=[]),e(this._events[a])||(this._events[a]=[this._events[a]]),this._events[a]}}(a("__browserify_process"))},{__browserify_process:18}],18:[function(a,b){var c=b.exports={};c.nextTick=function(){var a="undefined"!=typeof window&&window.setImmediate,b="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(a)return function(a){return window.setImmediate(a)};if(b){var c=[];return window.addEventListener("message",function(a){if(a.source===window&&"process-tick"===a.data&&(a.stopPropagation(),c.length>0)){var b=c.shift();b()}},!0),function(a){c.push(a),window.postMessage("process-tick","*")}}return function(a){setTimeout(a,0)}}(),c.title="browser",c.browser=!0,c.env={},c.argv=[],c.binding=function(){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(){throw new Error("process.chdir is not supported")}},{}],19:[function(a,b,c){!function(){!function(){"use strict";var a={};"undefined"==typeof c?"function"==typeof define&&"object"==typeof define.amd&&define.amd?(a.exports={},define(function(){return a.exports})):a.exports=window:a.exports=c,function(a){var b={};if(!c)var c=1e-6;b.create=function(){return new Float32Array(2)},b.clone=function(a){var b=new Float32Array(2);return b[0]=a[0],b[1]=a[1],b},b.fromValues=function(a,b){var c=new Float32Array(2);return c[0]=a,c[1]=b,c},b.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a},b.set=function(a,b,c){return a[0]=b,a[1]=c,a},b.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a},b.sub=b.subtract=function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a},b.mul=b.multiply=function(a,b,c){return a[0]=b[0]*c[0],a[1]=b[1]*c[1],a},b.div=b.divide=function(a,b,c){return a[0]=b[0]/c[0],a[1]=b[1]/c[1],a},b.min=function(a,b,c){return a[0]=Math.min(b[0],c[0]),a[1]=Math.min(b[1],c[1]),a},b.max=function(a,b,c){return a[0]=Math.max(b[0],c[0]),a[1]=Math.max(b[1],c[1]),a},b.scale=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a},b.dist=b.distance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1];return Math.sqrt(c*c+d*d)},b.sqrDist=b.squaredDistance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1];return c*c+d*d},b.len=b.length=function(a){var b=a[0],c=a[1];return Math.sqrt(b*b+c*c)},b.sqrLen=b.squaredLength=function(a){var b=a[0],c=a[1];return b*b+c*c},b.negate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a},b.normalize=function(a,b){var c=b[0],d=b[1],e=c*c+d*d;return e>0&&(e=1/Math.sqrt(e),a[0]=b[0]*e,a[1]=b[1]*e),a},b.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]},b.cross=function(a,b,c){var d=b[0]*c[1]-b[1]*c[0];return a[0]=a[1]=0,a[2]=d,a},b.lerp=function(a,b,c,d){var e=b[0],f=b[1];return a[0]=e+d*(c[0]-e),a[1]=f+d*(c[1]-f),a},b.transformMat2=function(a,b,c){var d=b[0],e=b[1];return a[0]=d*c[0]+e*c[1],a[1]=d*c[2]+e*c[3],a},b.forEach=function(){var a=new Float32Array(2);return function(b,c,d,e,f,g){var h,i;for(c||(c=2),d||(d=0),i=e?Math.min(e*c+d,b.length):b.length,h=d;i>h;h+=c)a[0]=b[h],a[1]=b[h+1],f(a,a,g),b[h]=a[0],b[h+1]=a[1];return b}}(),b.str=function(a){return"vec2("+a[0]+", "+a[1]+")"},"undefined"!=typeof a&&(a.vec2=b);var d={};if(!c)var c=1e-6;d.create=function(){return new Float32Array(3)},d.clone=function(a){var b=new Float32Array(3);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b},d.fromValues=function(a,b,c){var d=new Float32Array(3);return d[0]=a,d[1]=b,d[2]=c,d},d.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a},d.set=function(a,b,c,d){return a[0]=b,a[1]=c,a[2]=d,a},d.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a[2]=b[2]+c[2],a},d.sub=d.subtract=function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a[2]=b[2]-c[2],a},d.mul=d.multiply=function(a,b,c){return a[0]=b[0]*c[0],a[1]=b[1]*c[1],a[2]=b[2]*c[2],a},d.div=d.divide=function(a,b,c){return a[0]=b[0]/c[0],a[1]=b[1]/c[1],a[2]=b[2]/c[2],a},d.min=function(a,b,c){return a[0]=Math.min(b[0],c[0]),a[1]=Math.min(b[1],c[1]),a[2]=Math.min(b[2],c[2]),a},d.max=function(a,b,c){return a[0]=Math.max(b[0],c[0]),a[1]=Math.max(b[1],c[1]),a[2]=Math.max(b[2],c[2]),a},d.scale=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c,a},d.dist=d.distance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2];return Math.sqrt(c*c+d*d+e*e)},d.sqrDist=d.squaredDistance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2];return c*c+d*d+e*e},d.len=d.length=function(a){var b=a[0],c=a[1],d=a[2];return Math.sqrt(b*b+c*c+d*d)},d.sqrLen=d.squaredLength=function(a){var b=a[0],c=a[1],d=a[2];return b*b+c*c+d*d},d.negate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a[2]=-b[2],a},d.normalize=function(a,b){var c=b[0],d=b[1],e=b[2],f=c*c+d*d+e*e;return f>0&&(f=1/Math.sqrt(f),a[0]=b[0]*f,a[1]=b[1]*f,a[2]=b[2]*f),a},d.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]},d.cross=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=c[0],h=c[1],i=c[2];return a[0]=e*i-f*h,a[1]=f*g-d*i,a[2]=d*h-e*g,a},d.lerp=function(a,b,c,d){var e=b[0],f=b[1],g=b[2];return a[0]=e+d*(c[0]-e),a[1]=f+d*(c[1]-f),a[2]=g+d*(c[2]-g),a},d.transformMat4=function(a,b,c){var d=b[0],e=b[1],f=b[2];return a[0]=c[0]*d+c[4]*e+c[8]*f+c[12],a[1]=c[1]*d+c[5]*e+c[9]*f+c[13],a[2]=c[2]*d+c[6]*e+c[10]*f+c[14],a},d.transformQuat=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=c[0],h=c[1],i=c[2],j=c[3],k=j*d+h*f-i*e,l=j*e+i*d-g*f,m=j*f+g*e-h*d,n=-g*d-h*e-i*f;return a[0]=k*j+n*-g+l*-i-m*-h,a[1]=l*j+n*-h+m*-g-k*-i,a[2]=m*j+n*-i+k*-h-l*-g,a},d.forEach=function(){var a=new Float32Array(3);return function(b,c,d,e,f,g){var h,i;for(c||(c=3),d||(d=0),i=e?Math.min(e*c+d,b.length):b.length,h=d;i>h;h+=c)a[0]=b[h],a[1]=b[h+1],a[2]=b[h+2],f(a,a,g),b[h]=a[0],b[h+1]=a[1],b[h+2]=a[2];return b}}(),d.str=function(a){return"vec3("+a[0]+", "+a[1]+", "+a[2]+")"},"undefined"!=typeof a&&(a.vec3=d);var e={};if(!c)var c=1e-6;e.create=function(){return new Float32Array(4)},e.clone=function(a){var b=new Float32Array(4);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b},e.fromValues=function(a,b,c,d){var e=new Float32Array(4);return e[0]=a,e[1]=b,e[2]=c,e[3]=d,e},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a},e.set=function(a,b,c,d,e){return a[0]=b,a[1]=c,a[2]=d,a[3]=e,a},e.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a[2]=b[2]+c[2],a[3]=b[3]+c[3],a},e.sub=e.subtract=function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a[2]=b[2]-c[2],a[3]=b[3]-c[3],a},e.mul=e.multiply=function(a,b,c){return a[0]=b[0]*c[0],a[1]=b[1]*c[1],a[2]=b[2]*c[2],a[3]=b[3]*c[3],a},e.div=e.divide=function(a,b,c){return a[0]=b[0]/c[0],a[1]=b[1]/c[1],a[2]=b[2]/c[2],a[3]=b[3]/c[3],a},e.min=function(a,b,c){return a[0]=Math.min(b[0],c[0]),a[1]=Math.min(b[1],c[1]),a[2]=Math.min(b[2],c[2]),a[3]=Math.min(b[3],c[3]),a},e.max=function(a,b,c){return a[0]=Math.max(b[0],c[0]),a[1]=Math.max(b[1],c[1]),a[2]=Math.max(b[2],c[2]),a[3]=Math.max(b[3],c[3]),a},e.scale=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c,a[3]=b[3]*c,a},e.dist=e.distance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2],f=b[3]-a[3];return Math.sqrt(c*c+d*d+e*e+f*f)},e.sqrDist=e.squaredDistance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2],f=b[3]-a[3];return c*c+d*d+e*e+f*f},e.len=e.length=function(a){var b=a[0],c=a[1],d=a[2],e=a[3];return Math.sqrt(b*b+c*c+d*d+e*e)},e.sqrLen=e.squaredLength=function(a){var b=a[0],c=a[1],d=a[2],e=a[3];return b*b+c*c+d*d+e*e},e.negate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a[2]=-b[2],a[3]=-b[3],a},e.normalize=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c*c+d*d+e*e+f*f;return g>0&&(g=1/Math.sqrt(g),a[0]=b[0]*g,a[1]=b[1]*g,a[2]=b[2]*g,a[3]=b[3]*g),a},e.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]},e.lerp=function(a,b,c,d){var e=b[0],f=b[1],g=b[2],h=b[3];return a[0]=e+d*(c[0]-e),a[1]=f+d*(c[1]-f),a[2]=g+d*(c[2]-g),a[3]=h+d*(c[3]-h),a},e.transformMat4=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3];return a[0]=c[0]*d+c[4]*e+c[8]*f+c[12]*g,a[1]=c[1]*d+c[5]*e+c[9]*f+c[13]*g,a[2]=c[2]*d+c[6]*e+c[10]*f+c[14]*g,a[3]=c[3]*d+c[7]*e+c[11]*f+c[15]*g,a},e.transformQuat=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=c[0],h=c[1],i=c[2],j=c[3],k=j*d+h*f-i*e,l=j*e+i*d-g*f,m=j*f+g*e-h*d,n=-g*d-h*e-i*f;return a[0]=k*j+n*-g+l*-i-m*-h,a[1]=l*j+n*-h+m*-g-k*-i,a[2]=m*j+n*-i+k*-h-l*-g,a},e.forEach=function(){var a=new Float32Array(4);return function(b,c,d,e,f,g){var h,i;for(c||(c=4),d||(d=0),i=e?Math.min(e*c+d,b.length):b.length,h=d;i>h;h+=c)a[0]=b[h],a[1]=b[h+1],a[2]=b[h+2],a[3]=b[h+3],f(a,a,g),b[h]=a[0],b[h+1]=a[1],b[h+2]=a[2],b[h+3]=a[3];return b}}(),e.str=function(a){return"vec4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"},"undefined"!=typeof a&&(a.vec4=e);var f={},g=new Float32Array([1,0,0,1]);if(!c)var c=1e-6;f.create=function(){return new Float32Array(g)},f.clone=function(a){var b=new Float32Array(4);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b},f.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a},f.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a},f.transpose=function(a,b){if(a===b){var c=b[1];a[1]=b[2],a[2]=c}else a[0]=b[0],a[1]=b[2],a[2]=b[1],a[3]=b[3];return a},f.invert=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c*f-e*d;return g?(g=1/g,a[0]=f*g,a[1]=-d*g,a[2]=-e*g,a[3]=c*g,a):null
},f.adjoint=function(a,b){var c=b[0];return a[0]=b[3],a[1]=-b[1],a[2]=-b[2],a[3]=c,a},f.determinant=function(a){return a[0]*a[3]-a[2]*a[1]},f.mul=f.multiply=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=c[0],i=c[1],j=c[2],k=c[3];return a[0]=d*h+e*j,a[1]=d*i+e*k,a[2]=f*h+g*j,a[3]=f*i+g*k,a},f.rotate=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=Math.sin(c),i=Math.cos(c);return a[0]=d*i+e*h,a[1]=d*-h+e*i,a[2]=f*i+g*h,a[3]=f*-h+g*i,a},f.scale=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=c[0],i=c[1];return a[0]=d*h,a[1]=e*i,a[2]=f*h,a[3]=g*i,a},f.str=function(a){return"mat2("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"},"undefined"!=typeof a&&(a.mat2=f);var h={},i=new Float32Array([1,0,0,0,1,0,0,0,1]);if(!c)var c=1e-6;h.create=function(){return new Float32Array(i)},h.clone=function(a){var b=new Float32Array(9);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b},h.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a},h.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},h.transpose=function(a,b){if(a===b){var c=b[1],d=b[2],e=b[5];a[1]=b[3],a[2]=b[6],a[3]=c,a[5]=b[7],a[6]=d,a[7]=e}else a[0]=b[0],a[1]=b[3],a[2]=b[6],a[3]=b[1],a[4]=b[4],a[5]=b[7],a[6]=b[2],a[7]=b[5],a[8]=b[8];return a},h.invert=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=k*g-h*j,m=-k*f+h*i,n=j*f-g*i,o=c*l+d*m+e*n;return o?(o=1/o,a[0]=l*o,a[1]=(-k*d+e*j)*o,a[2]=(h*d-e*g)*o,a[3]=m*o,a[4]=(k*c-e*i)*o,a[5]=(-h*c+e*f)*o,a[6]=n*o,a[7]=(-j*c+d*i)*o,a[8]=(g*c-d*f)*o,a):null},h.adjoint=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8];return a[0]=g*k-h*j,a[1]=e*j-d*k,a[2]=d*h-e*g,a[3]=h*i-f*k,a[4]=c*k-e*i,a[5]=e*f-c*h,a[6]=f*j-g*i,a[7]=d*i-c*j,a[8]=c*g-d*f,a},h.determinant=function(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],i=a[7],j=a[8];return b*(j*f-g*i)+c*(-j*e+g*h)+d*(i*e-f*h)},h.mul=h.multiply=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=c[0],n=c[1],o=c[2],p=c[3],q=c[4],r=c[5],s=c[6],t=c[7],u=c[8];return a[0]=m*d+n*g+o*j,a[1]=m*e+n*h+o*k,a[2]=m*f+n*i+o*l,a[3]=p*d+q*g+r*j,a[4]=p*e+q*h+r*k,a[5]=p*f+q*i+r*l,a[6]=s*d+t*g+u*j,a[7]=s*e+t*h+u*k,a[8]=s*f+t*i+u*l,a},h.str=function(a){return"mat3("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"},"undefined"!=typeof a&&(a.mat3=h);var j={},k=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);if(!c)var c=1e-6;j.create=function(){return new Float32Array(k)},j.clone=function(a){var b=new Float32Array(16);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15],b},j.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15],a},j.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},j.transpose=function(a,b){if(a===b){var c=b[1],d=b[2],e=b[3],f=b[6],g=b[7],h=b[11];a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=c,a[6]=b[9],a[7]=b[13],a[8]=d,a[9]=f,a[11]=b[14],a[12]=e,a[13]=g,a[14]=h}else a[0]=b[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=b[7],a[14]=b[11],a[15]=b[15];return a},j.invert=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=b[9],m=b[10],n=b[11],o=b[12],p=b[13],q=b[14],r=b[15],s=c*h-d*g,t=c*i-e*g,u=c*j-f*g,v=d*i-e*h,w=d*j-f*h,x=e*j-f*i,y=k*p-l*o,z=k*q-m*o,A=k*r-n*o,B=l*q-m*p,C=l*r-n*p,D=m*r-n*q,E=s*D-t*C+u*B+v*A-w*z+x*y;return E?(E=1/E,a[0]=(h*D-i*C+j*B)*E,a[1]=(e*C-d*D-f*B)*E,a[2]=(p*x-q*w+r*v)*E,a[3]=(m*w-l*x-n*v)*E,a[4]=(i*A-g*D-j*z)*E,a[5]=(c*D-e*A+f*z)*E,a[6]=(q*u-o*x-r*t)*E,a[7]=(k*x-m*u+n*t)*E,a[8]=(g*C-h*A+j*y)*E,a[9]=(d*A-c*C-f*y)*E,a[10]=(o*w-p*u+r*s)*E,a[11]=(l*u-k*w-n*s)*E,a[12]=(h*z-g*B-i*y)*E,a[13]=(c*B-d*z+e*y)*E,a[14]=(p*t-o*v-q*s)*E,a[15]=(k*v-l*t+m*s)*E,a):null},j.adjoint=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=b[9],m=b[10],n=b[11],o=b[12],p=b[13],q=b[14],r=b[15];return a[0]=h*(m*r-n*q)-l*(i*r-j*q)+p*(i*n-j*m),a[1]=-(d*(m*r-n*q)-l*(e*r-f*q)+p*(e*n-f*m)),a[2]=d*(i*r-j*q)-h*(e*r-f*q)+p*(e*j-f*i),a[3]=-(d*(i*n-j*m)-h*(e*n-f*m)+l*(e*j-f*i)),a[4]=-(g*(m*r-n*q)-k*(i*r-j*q)+o*(i*n-j*m)),a[5]=c*(m*r-n*q)-k*(e*r-f*q)+o*(e*n-f*m),a[6]=-(c*(i*r-j*q)-g*(e*r-f*q)+o*(e*j-f*i)),a[7]=c*(i*n-j*m)-g*(e*n-f*m)+k*(e*j-f*i),a[8]=g*(l*r-n*p)-k*(h*r-j*p)+o*(h*n-j*l),a[9]=-(c*(l*r-n*p)-k*(d*r-f*p)+o*(d*n-f*l)),a[10]=c*(h*r-j*p)-g*(d*r-f*p)+o*(d*j-f*h),a[11]=-(c*(h*n-j*l)-g*(d*n-f*l)+k*(d*j-f*h)),a[12]=-(g*(l*q-m*p)-k*(h*q-i*p)+o*(h*m-i*l)),a[13]=c*(l*q-m*p)-k*(d*q-e*p)+o*(d*m-e*l),a[14]=-(c*(h*q-i*p)-g*(d*q-e*p)+o*(d*i-e*h)),a[15]=c*(h*m-i*l)-g*(d*m-e*l)+k*(d*i-e*h),a},j.determinant=function(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],i=a[7],j=a[8],k=a[9],l=a[10],m=a[11],n=a[12],o=a[13],p=a[14],q=a[15],r=b*g-c*f,s=b*h-d*f,t=b*i-e*f,u=c*h-d*g,v=c*i-e*g,w=d*i-e*h,x=j*o-k*n,y=j*p-l*n,z=j*q-m*n,A=k*p-l*o,B=k*q-m*o,C=l*q-m*p;return r*C-s*B+t*A+u*z-v*y+w*x},j.mul=j.multiply=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=b[9],n=b[10],o=b[11],p=b[12],q=b[13],r=b[14],s=b[15],t=c[0],u=c[1],v=c[2],w=c[3];return a[0]=t*d+u*h+v*l+w*p,a[1]=t*e+u*i+v*m+w*q,a[2]=t*f+u*j+v*n+w*r,a[3]=t*g+u*k+v*o+w*s,t=c[4],u=c[5],v=c[6],w=c[7],a[4]=t*d+u*h+v*l+w*p,a[5]=t*e+u*i+v*m+w*q,a[6]=t*f+u*j+v*n+w*r,a[7]=t*g+u*k+v*o+w*s,t=c[8],u=c[9],v=c[10],w=c[11],a[8]=t*d+u*h+v*l+w*p,a[9]=t*e+u*i+v*m+w*q,a[10]=t*f+u*j+v*n+w*r,a[11]=t*g+u*k+v*o+w*s,t=c[12],u=c[13],v=c[14],w=c[15],a[12]=t*d+u*h+v*l+w*p,a[13]=t*e+u*i+v*m+w*q,a[14]=t*f+u*j+v*n+w*r,a[15]=t*g+u*k+v*o+w*s,a},j.translate=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p=c[0],q=c[1],r=c[2];return b===a?(a[12]=b[0]*p+b[4]*q+b[8]*r+b[12],a[13]=b[1]*p+b[5]*q+b[9]*r+b[13],a[14]=b[2]*p+b[6]*q+b[10]*r+b[14],a[15]=b[3]*p+b[7]*q+b[11]*r+b[15]):(d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=b[9],n=b[10],o=b[11],a[0]=d,a[1]=e,a[2]=f,a[3]=g,a[4]=h,a[5]=i,a[6]=j,a[7]=k,a[8]=l,a[9]=m,a[10]=n,a[11]=o,a[12]=d*p+h*q+l*r+b[12],a[13]=e*p+i*q+m*r+b[13],a[14]=f*p+j*q+n*r+b[14],a[15]=g*p+k*q+o*r+b[15]),a},j.scale=function(a,b,c){var d=c[0],e=c[1],f=c[2];return a[0]=b[0]*d,a[1]=b[1]*d,a[2]=b[2]*d,a[3]=b[3]*d,a[4]=b[4]*e,a[5]=b[5]*e,a[6]=b[6]*e,a[7]=b[7]*e,a[8]=b[8]*f,a[9]=b[9]*f,a[10]=b[10]*f,a[11]=b[11]*f,a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15],a},j.rotate=function(a,b,d,e){var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D=e[0],E=e[1],F=e[2],G=Math.sqrt(D*D+E*E+F*F);return Math.abs(G)<c?null:(G=1/G,D*=G,E*=G,F*=G,f=Math.sin(d),g=Math.cos(d),h=1-g,i=b[0],j=b[1],k=b[2],l=b[3],m=b[4],n=b[5],o=b[6],p=b[7],q=b[8],r=b[9],s=b[10],t=b[11],u=D*D*h+g,v=E*D*h+F*f,w=F*D*h-E*f,x=D*E*h-F*f,y=E*E*h+g,z=F*E*h+D*f,A=D*F*h+E*f,B=E*F*h-D*f,C=F*F*h+g,a[0]=i*u+m*v+q*w,a[1]=j*u+n*v+r*w,a[2]=k*u+o*v+s*w,a[3]=l*u+p*v+t*w,a[4]=i*x+m*y+q*z,a[5]=j*x+n*y+r*z,a[6]=k*x+o*y+s*z,a[7]=l*x+p*y+t*z,a[8]=i*A+m*B+q*C,a[9]=j*A+n*B+r*C,a[10]=k*A+o*B+s*C,a[11]=l*A+p*B+t*C,b!==a&&(a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a)},j.rotateX=function(a,b,c){var d=Math.sin(c),e=Math.cos(c),f=b[4],g=b[5],h=b[6],i=b[7],j=b[8],k=b[9],l=b[10],m=b[11];return b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[4]=f*e+j*d,a[5]=g*e+k*d,a[6]=h*e+l*d,a[7]=i*e+m*d,a[8]=j*e-f*d,a[9]=k*e-g*d,a[10]=l*e-h*d,a[11]=m*e-i*d,a},j.rotateY=function(a,b,c){var d=Math.sin(c),e=Math.cos(c),f=b[0],g=b[1],h=b[2],i=b[3],j=b[8],k=b[9],l=b[10],m=b[11];return b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[0]=f*e-j*d,a[1]=g*e-k*d,a[2]=h*e-l*d,a[3]=i*e-m*d,a[8]=f*d+j*e,a[9]=g*d+k*e,a[10]=h*d+l*e,a[11]=i*d+m*e,a},j.rotateZ=function(a,b,c){var d=Math.sin(c),e=Math.cos(c),f=b[0],g=b[1],h=b[2],i=b[3],j=b[4],k=b[5],l=b[6],m=b[7];return b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[0]=f*e+j*d,a[1]=g*e+k*d,a[2]=h*e+l*d,a[3]=i*e+m*d,a[4]=j*e-f*d,a[5]=k*e-g*d,a[6]=l*e-h*d,a[7]=m*e-i*d,a},j.fromRotationTranslation=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=d+d,i=e+e,j=f+f,k=d*h,l=d*i,m=d*j,n=e*i,o=e*j,p=f*j,q=g*h,r=g*i,s=g*j;return a[0]=1-(n+p),a[1]=l+s,a[2]=m-r,a[3]=0,a[4]=l-s,a[5]=1-(k+p),a[6]=o+q,a[7]=0,a[8]=m+r,a[9]=o-q,a[10]=1-(k+n),a[11]=0,a[12]=c[0],a[13]=c[1],a[14]=c[2],a[15]=1,a},j.frustum=function(a,b,c,d,e,f,g){var h=1/(c-b),i=1/(e-d),j=1/(f-g);return a[0]=2*f*h,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2*f*i,a[6]=0,a[7]=0,a[8]=(c+b)*h,a[9]=(e+d)*i,a[10]=(g+f)*j,a[11]=-1,a[12]=0,a[13]=0,a[14]=2*g*f*j,a[15]=0,a},j.perspective=function(a,b,c,d,e){var f=1/Math.tan(b/2),g=1/(d-e);return a[0]=f/c,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=f,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=(e+d)*g,a[11]=-1,a[12]=0,a[13]=0,a[14]=2*e*d*g,a[15]=0,a},j.ortho=function(a,b,c,d,e,f,g){var h=1/(b-c),i=1/(d-e),j=1/(f-g);return a[0]=-2*h,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*i,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*j,a[11]=0,a[12]=(b+c)*h,a[13]=(e+d)*i,a[14]=(g+f)*j,a[15]=1,a},j.lookAt=function(a,b,d,e){var f,g,h,i,k,l,m,n,o,p,q=b[0],r=b[1],s=b[2],t=e[0],u=e[1],v=e[2],w=d[0],x=d[1],y=d[2];return Math.abs(q-w)<c&&Math.abs(r-x)<c&&Math.abs(s-y)<c?j.identity(a):(m=q-w,n=r-x,o=s-y,p=1/Math.sqrt(m*m+n*n+o*o),m*=p,n*=p,o*=p,f=u*o-v*n,g=v*m-t*o,h=t*n-u*m,p=Math.sqrt(f*f+g*g+h*h),p?(p=1/p,f*=p,g*=p,h*=p):(f=0,g=0,h=0),i=n*h-o*g,k=o*f-m*h,l=m*g-n*f,p=Math.sqrt(i*i+k*k+l*l),p?(p=1/p,i*=p,k*=p,l*=p):(i=0,k=0,l=0),a[0]=f,a[1]=i,a[2]=m,a[3]=0,a[4]=g,a[5]=k,a[6]=n,a[7]=0,a[8]=h,a[9]=l,a[10]=o,a[11]=0,a[12]=-(f*q+g*r+h*s),a[13]=-(i*q+k*r+l*s),a[14]=-(m*q+n*r+o*s),a[15]=1,a)},j.str=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"},"undefined"!=typeof a&&(a.mat4=j);var l={},m=new Float32Array([0,0,0,1]);if(!c)var c=1e-6;l.create=function(){return new Float32Array(m)},l.clone=e.clone,l.fromValues=e.fromValues,l.copy=e.copy,l.set=e.set,l.identity=function(a){return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a},l.setAxisAngle=function(a,b,c){c=.5*c;var d=Math.sin(c);return a[0]=d*b[0],a[1]=d*b[1],a[2]=d*b[2],a[3]=Math.cos(c),a},l.add=e.add,l.mul=l.multiply=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=c[0],i=c[1],j=c[2],k=c[3];return a[0]=d*k+g*h+e*j-f*i,a[1]=e*k+g*i+f*h-d*j,a[2]=f*k+g*j+d*i-e*h,a[3]=g*k-d*h-e*i-f*j,a},l.scale=e.scale,l.rotateX=function(a,b,c){c*=.5;var d=b[0],e=b[1],f=b[2],g=b[3],h=Math.sin(c),i=Math.cos(c);return a[0]=d*i+g*h,a[1]=e*i+f*h,a[2]=f*i-e*h,a[3]=g*i-d*h,a},l.rotateY=function(a,b,c){c*=.5;var d=b[0],e=b[1],f=b[2],g=b[3],h=Math.sin(c),i=Math.cos(c);return a[0]=d*i-f*h,a[1]=e*i+g*h,a[2]=f*i+d*h,a[3]=g*i-e*h,a},l.rotateZ=function(a,b,c){c*=.5;var d=b[0],e=b[1],f=b[2],g=b[3],h=Math.sin(c),i=Math.cos(c);return a[0]=d*i+e*h,a[1]=e*i-d*h,a[2]=f*i+g*h,a[3]=g*i-f*h,a},l.calculateW=function(a,b){var c=b[0],d=b[1],e=b[2];return a[0]=c,a[1]=d,a[2]=e,a[3]=-Math.sqrt(Math.abs(1-c*c-d*d-e*e)),a},l.dot=e.dot,l.lerp=e.lerp,l.slerp=function(a,b,c,d){var e,f,g,h,i=b[0],j=b[1],k=b[2],l=b[3],m=c[0],n=c[1],o=c[2],p=b[3],q=i*m+j*n+k*o+l*p;return Math.abs(q)>=1?(a!==b&&(a[0]=i,a[1]=j,a[2]=k,a[3]=l),a):(e=Math.acos(q),f=Math.sqrt(1-q*q),Math.abs(f)<.001?(a[0]=.5*i+.5*m,a[1]=.5*j+.5*n,a[2]=.5*k+.5*o,a[3]=.5*l+.5*p,a):(g=Math.sin((1-d)*e)/f,h=Math.sin(d*e)/f,a[0]=i*g+m*h,a[1]=j*g+n*h,a[2]=k*g+o*h,a[3]=l*g+p*h,a))},l.invert=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c*c+d*d+e*e+f*f,h=g?1/g:0;return a[0]=-c*h,a[1]=-d*h,a[2]=-e*h,a[3]=f*h,a},l.conjugate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a[2]=-b[2],a[3]=b[3],a},l.len=l.length=e.length,l.sqrLen=l.squaredLength=e.squaredLength,l.normalize=e.normalize,l.str=function(a){return"quat("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"},"undefined"!=typeof a&&(a.quat=l)}(a.exports)}()}()},{}],20:[function(a,b,c){!function(){(function(){var a=this,d=a._,e={},f=Array.prototype,g=Object.prototype,h=Function.prototype,i=f.push,j=f.slice,k=f.concat,l=g.toString,m=g.hasOwnProperty,n=f.forEach,o=f.map,p=f.reduce,q=f.reduceRight,r=f.filter,s=f.every,t=f.some,u=f.indexOf,v=f.lastIndexOf,w=Array.isArray,x=Object.keys,y=h.bind,z=function(a){return a instanceof z?a:this instanceof z?(this._wrapped=a,void 0):new z(a)};"undefined"!=typeof c?("undefined"!=typeof b&&b.exports&&(c=b.exports=z),c._=z):a._=z,z.VERSION="1.4.4";var A=z.each=z.forEach=function(a,b,c){if(null!=a)if(n&&a.forEach===n)a.forEach(b,c);else if(a.length===+a.length){for(var d=0,f=a.length;f>d;d++)if(b.call(c,a[d],d,a)===e)return}else for(var g in a)if(z.has(a,g)&&b.call(c,a[g],g,a)===e)return};z.map=z.collect=function(a,b,c){var d=[];return null==a?d:o&&a.map===o?a.map(b,c):(A(a,function(a,e,f){d[d.length]=b.call(c,a,e,f)}),d)};var B="Reduce of empty array with no initial value";z.reduce=z.foldl=z.inject=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),p&&a.reduce===p)return d&&(b=z.bind(b,d)),e?a.reduce(b,c):a.reduce(b);if(A(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)}),!e)throw new TypeError(B);return c},z.reduceRight=z.foldr=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),q&&a.reduceRight===q)return d&&(b=z.bind(b,d)),e?a.reduceRight(b,c):a.reduceRight(b);var f=a.length;if(f!==+f){var g=z.keys(a);f=g.length}if(A(a,function(h,i,j){i=g?g[--f]:--f,e?c=b.call(d,c,a[i],i,j):(c=a[i],e=!0)}),!e)throw new TypeError(B);return c},z.find=z.detect=function(a,b,c){var d;return C(a,function(a,e,f){return b.call(c,a,e,f)?(d=a,!0):void 0}),d},z.filter=z.select=function(a,b,c){var d=[];return null==a?d:r&&a.filter===r?a.filter(b,c):(A(a,function(a,e,f){b.call(c,a,e,f)&&(d[d.length]=a)}),d)},z.reject=function(a,b,c){return z.filter(a,function(a,d,e){return!b.call(c,a,d,e)},c)},z.every=z.all=function(a,b,c){b||(b=z.identity);var d=!0;return null==a?d:s&&a.every===s?a.every(b,c):(A(a,function(a,f,g){return(d=d&&b.call(c,a,f,g))?void 0:e}),!!d)};var C=z.some=z.any=function(a,b,c){b||(b=z.identity);var d=!1;return null==a?d:t&&a.some===t?a.some(b,c):(A(a,function(a,f,g){return d||(d=b.call(c,a,f,g))?e:void 0}),!!d)};z.contains=z.include=function(a,b){return null==a?!1:u&&a.indexOf===u?-1!=a.indexOf(b):C(a,function(a){return a===b})},z.invoke=function(a,b){var c=j.call(arguments,2),d=z.isFunction(b);return z.map(a,function(a){return(d?b:a[b]).apply(a,c)})},z.pluck=function(a,b){return z.map(a,function(a){return a[b]})},z.where=function(a,b,c){return z.isEmpty(b)?c?null:[]:z[c?"find":"filter"](a,function(a){for(var c in b)if(b[c]!==a[c])return!1;return!0})},z.findWhere=function(a,b){return z.where(a,b,!0)},z.max=function(a,b,c){if(!b&&z.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.max.apply(Math,a);if(!b&&z.isEmpty(a))return-1/0;var d={computed:-1/0,value:-1/0};return A(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g>=d.computed&&(d={value:a,computed:g})}),d.value},z.min=function(a,b,c){if(!b&&z.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.min.apply(Math,a);if(!b&&z.isEmpty(a))return 1/0;var d={computed:1/0,value:1/0};return A(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g<d.computed&&(d={value:a,computed:g})}),d.value},z.shuffle=function(a){var b,c=0,d=[];return A(a,function(a){b=z.random(c++),d[c-1]=d[b],d[b]=a}),d};var D=function(a){return z.isFunction(a)?a:function(b){return b[a]}};z.sortBy=function(a,b,c){var d=D(b);return z.pluck(z.map(a,function(a,b,e){return{value:a,index:b,criteria:d.call(c,a,b,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index<b.index?-1:1}),"value")};var E=function(a,b,c,d){var e={},f=D(b||z.identity);return A(a,function(b,g){var h=f.call(c,b,g,a);d(e,h,b)}),e};z.groupBy=function(a,b,c){return E(a,b,c,function(a,b,c){(z.has(a,b)?a[b]:a[b]=[]).push(c)})},z.countBy=function(a,b,c){return E(a,b,c,function(a,b){z.has(a,b)||(a[b]=0),a[b]++})},z.sortedIndex=function(a,b,c,d){c=null==c?z.identity:D(c);for(var e=c.call(d,b),f=0,g=a.length;g>f;){var h=f+g>>>1;c.call(d,a[h])<e?f=h+1:g=h}return f},z.toArray=function(a){return a?z.isArray(a)?j.call(a):a.length===+a.length?z.map(a,z.identity):z.values(a):[]},z.size=function(a){return null==a?0:a.length===+a.length?a.length:z.keys(a).length},z.first=z.head=z.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:j.call(a,0,b)},z.initial=function(a,b,c){return j.call(a,0,a.length-(null==b||c?1:b))},z.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:j.call(a,Math.max(a.length-b,0))},z.rest=z.tail=z.drop=function(a,b,c){return j.call(a,null==b||c?1:b)},z.compact=function(a){return z.filter(a,z.identity)};var F=function(a,b,c){return A(a,function(a){z.isArray(a)?b?i.apply(c,a):F(a,b,c):c.push(a)}),c};z.flatten=function(a,b){return F(a,b,[])},z.without=function(a){return z.difference(a,j.call(arguments,1))},z.uniq=z.unique=function(a,b,c,d){z.isFunction(b)&&(d=c,c=b,b=!1);var e=c?z.map(a,c,d):a,f=[],g=[];return A(e,function(c,d){(b?d&&g[g.length-1]===c:z.contains(g,c))||(g.push(c),f.push(a[d]))}),f},z.union=function(){return z.uniq(k.apply(f,arguments))},z.intersection=function(a){var b=j.call(arguments,1);return z.filter(z.uniq(a),function(a){return z.every(b,function(b){return z.indexOf(b,a)>=0})})},z.difference=function(a){var b=k.apply(f,j.call(arguments,1));return z.filter(a,function(a){return!z.contains(b,a)})},z.zip=function(){for(var a=j.call(arguments),b=z.max(z.pluck(a,"length")),c=new Array(b),d=0;b>d;d++)c[d]=z.pluck(a,""+d);return c},z.object=function(a,b){if(null==a)return{};for(var c={},d=0,e=a.length;e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},z.indexOf=function(a,b,c){if(null==a)return-1;var d=0,e=a.length;if(c){if("number"!=typeof c)return d=z.sortedIndex(a,b),a[d]===b?d:-1;d=0>c?Math.max(0,e+c):c}if(u&&a.indexOf===u)return a.indexOf(b,c);for(;e>d;d++)if(a[d]===b)return d;return-1},z.lastIndexOf=function(a,b,c){if(null==a)return-1;var d=null!=c;if(v&&a.lastIndexOf===v)return d?a.lastIndexOf(b,c):a.lastIndexOf(b);for(var e=d?c:a.length;e--;)if(a[e]===b)return e;return-1},z.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=arguments[2]||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=new Array(d);d>e;)f[e++]=a,a+=c;return f},z.bind=function(a,b){if(a.bind===y&&y)return y.apply(a,j.call(arguments,1));var c=j.call(arguments,2);return function(){return a.apply(b,c.concat(j.call(arguments)))}},z.partial=function(a){var b=j.call(arguments,1);return function(){return a.apply(this,b.concat(j.call(arguments)))}},z.bindAll=function(a){var b=j.call(arguments,1);return 0===b.length&&(b=z.functions(a)),A(b,function(b){a[b]=z.bind(a[b],a)}),a},z.memoize=function(a,b){var c={};return b||(b=z.identity),function(){var d=b.apply(this,arguments);return z.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}},z.delay=function(a,b){var c=j.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},z.defer=function(a){return z.delay.apply(z,[a,1].concat(j.call(arguments,1)))},z.throttle=function(a,b){var c,d,e,f,g=0,h=function(){g=new Date,e=null,f=a.apply(c,d)};return function(){var i=new Date,j=b-(i-g);return c=this,d=arguments,0>=j?(clearTimeout(e),e=null,g=i,f=a.apply(c,d)):e||(e=setTimeout(h,j)),f}},z.debounce=function(a,b,c){var d,e;return function(){var f=this,g=arguments,h=function(){d=null,c||(e=a.apply(f,g))},i=c&&!d;return clearTimeout(d),d=setTimeout(h,b),i&&(e=a.apply(f,g)),e}},z.once=function(a){var b,c=!1;return function(){return c?b:(c=!0,b=a.apply(this,arguments),a=null,b)}},z.wrap=function(a,b){return function(){var c=[a];return i.apply(c,arguments),b.apply(this,c)}},z.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},z.after=function(a,b){return 0>=a?b():function(){return--a<1?b.apply(this,arguments):void 0}},z.keys=x||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[];for(var c in a)z.has(a,c)&&(b[b.length]=c);return b},z.values=function(a){var b=[];for(var c in a)z.has(a,c)&&b.push(a[c]);return b},z.pairs=function(a){var b=[];for(var c in a)z.has(a,c)&&b.push([c,a[c]]);return b},z.invert=function(a){var b={};for(var c in a)z.has(a,c)&&(b[a[c]]=c);return b},z.functions=z.methods=function(a){var b=[];for(var c in a)z.isFunction(a[c])&&b.push(c);return b.sort()},z.extend=function(a){return A(j.call(arguments,1),function(b){if(b)for(var c in b)a[c]=b[c]}),a},z.pick=function(a){var b={},c=k.apply(f,j.call(arguments,1));return A(c,function(c){c in a&&(b[c]=a[c])}),b},z.omit=function(a){var b={},c=k.apply(f,j.call(arguments,1));for(var d in a)z.contains(c,d)||(b[d]=a[d]);return b},z.defaults=function(a){return A(j.call(arguments,1),function(b){if(b)for(var c in b)null==a[c]&&(a[c]=b[c])}),a},z.clone=function(a){return z.isObject(a)?z.isArray(a)?a.slice():z.extend({},a):a},z.tap=function(a,b){return b(a),a};var G=function(a,b,c,d){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;a instanceof z&&(a=a._wrapped),b instanceof z&&(b=b._wrapped);var e=l.call(a);if(e!=l.call(b))return!1;switch(e){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return!1;for(var f=c.length;f--;)if(c[f]==a)return d[f]==b;c.push(a),d.push(b);var g=0,h=!0;if("[object Array]"==e){if(g=a.length,h=g==b.length)for(;g--&&(h=G(a[g],b[g],c,d)););}else{var i=a.constructor,j=b.constructor;if(i!==j&&!(z.isFunction(i)&&i instanceof i&&z.isFunction(j)&&j instanceof j))return!1;for(var k in a)if(z.has(a,k)&&(g++,!(h=z.has(b,k)&&G(a[k],b[k],c,d))))break;if(h){for(k in b)if(z.has(b,k)&&!g--)break;h=!g}}return c.pop(),d.pop(),h};z.isEqual=function(a,b){return G(a,b,[],[])},z.isEmpty=function(a){if(null==a)return!0;if(z.isArray(a)||z.isString(a))return 0===a.length;for(var b in a)if(z.has(a,b))return!1;return!0},z.isElement=function(a){return!(!a||1!==a.nodeType)},z.isArray=w||function(a){return"[object Array]"==l.call(a)},z.isObject=function(a){return a===Object(a)},A(["Arguments","Function","String","Number","Date","RegExp"],function(a){z["is"+a]=function(b){return l.call(b)=="[object "+a+"]"}}),z.isArguments(arguments)||(z.isArguments=function(a){return!(!a||!z.has(a,"callee"))}),"function"!=typeof/./&&(z.isFunction=function(a){return"function"==typeof a}),z.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},z.isNaN=function(a){return z.isNumber(a)&&a!=+a},z.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"==l.call(a)},z.isNull=function(a){return null===a},z.isUndefined=function(a){return void 0===a},z.has=function(a,b){return m.call(a,b)},z.noConflict=function(){return a._=d,this},z.identity=function(a){return a},z.times=function(a,b,c){for(var d=Array(a),e=0;a>e;e++)d[e]=b.call(c,e);return d},z.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))};var H={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};H.unescape=z.invert(H.escape);var I={escape:new RegExp("["+z.keys(H.escape).join("")+"]","g"),unescape:new RegExp("("+z.keys(H.unescape).join("|")+")","g")};z.each(["escape","unescape"],function(a){z[a]=function(b){return null==b?"":(""+b).replace(I[a],function(b){return H[a][b]})}}),z.result=function(a,b){if(null==a)return null;var c=a[b];return z.isFunction(c)?c.call(a):c},z.mixin=function(a){A(z.functions(a),function(b){var c=z[b]=a[b];z.prototype[b]=function(){var a=[this._wrapped];return i.apply(a,arguments),N.call(this,c.apply(z,a))}})};var J=0;z.uniqueId=function(a){var b=++J+"";return a?a+b:b},z.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var K=/(.)^/,L={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},M=/\\|'|\r|\n|\t|\u2028|\u2029/g;z.template=function(a,b,c){var d;c=z.defaults({},c,z.templateSettings);var e=new RegExp([(c.escape||K).source,(c.interpolate||K).source,(c.evaluate||K).source].join("|")+"|$","g"),f=0,g="__p+='";a.replace(e,function(b,c,d,e,h){return g+=a.slice(f,h).replace(M,function(a){return"\\"+L[a]}),c&&(g+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'"),d&&(g+="'+\n((__t=("+d+"))==null?'':__t)+\n'"),e&&(g+="';\n"+e+"\n__p+='"),f=h+b.length,b}),g+="';\n",c.variable||(g="with(obj||{}){\n"+g+"}\n"),g="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+g+"return __p;\n";try{d=new Function(c.variable||"obj","_",g)}catch(h){throw h.source=g,h}if(b)return d(b,z);var i=function(a){return d.call(this,a,z)};return i.source="function("+(c.variable||"obj")+"){\n"+g+"}",i},z.chain=function(a){return z(a).chain()};var N=function(a){return this._chain?z(a).chain():a};z.mixin(z),A(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=f[a];z.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!=a&&"splice"!=a||0!==c.length||delete c[0],N.call(this,c)}}),A(["concat","join","slice"],function(a){var b=f[a];z.prototype[a]=function(){return N.call(this,b.apply(this._wrapped,arguments))}}),z.extend(z.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this)}()},{}],21:[function(a){"function"!=typeof window.requestAnimationFrame&&(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){setTimeout(a,1e3/60)}),Leap=a("../lib/index")},{"../lib/index":8}]},{},[21]);var LeapElement=function(a){this.element=a,this.cursor=null};LeapElement.prototype={isAttractor:function(){return"true"===this.element.getAttribute("leap-attractor")||null!=this.element.getAttribute("leap-attractor-x-padding")&&!isNaN(this.element.getAttribute("leap-attractor-x-padding"))||null!=this.element.getAttribute("leap-attractor-y-padding")&&!isNaN(this.element.getAttribute("leap-attractor-y-padding"))},appendChild:function(a){return a instanceof HTMLElement?this.element.appendChild(a):this.element.appendChild(a.getElement())},removeChild:function(a){return a instanceof HTMLElement?this.element.removeChild(a):this.element.removeChild(a.getElement())},getID:function(){return this.element.id},setStyle:function(a){for(var b in a)this.element.style[b]=a[b]},getParent:function(){return this.element.parentNode},getWidth:function(){return this.element.offsetWidth},getHeight:function(){return this.element.offsetHeight},getElement:function(){return this.element},hasCursor:function(){return null!==this.cursor},capture:function(a){this.cursor=a,this.cursor.capture(this)},release:function(){this.cursor&&(this.cursor.release(),this.cursor=null)},getAttractorPadding:function(){return{x:parseInt(this.element.getAttribute("leap-attractor-x-padding"),10)||0,y:parseInt(this.element.getAttribute("leap-attractor-y-padding"),10)||0}},setAttribute:function(a,b){this.element.setAttribute(a,b)},getClickDelay:function(){return this.element.getAttribute("leap-click-delay")},hasMultitap:function(){return"true"===this.element.getAttribute("leap-enable-multitap")},isTappable:function(){return"true"!==this.element.getAttribute("leap-disable-tap")},isHoverable:function(){return"true"!==this.element.getAttribute("leap-disable-hover")},hasRelay:function(){return null!==this.element.getAttribute("leap-relay")},getRelay:function(){var a=this.element.getAttribute("leap-relay");return a},setXY:function(a,b){this.setX(a),this.setY(b)},setX:function(a){this.element.style.left=a+"px"},setY:function(a){this.element.style.top=a+"px"},getX:function(){return this.element.getBoundingClientRect().left},getY:function(){return this.element.getBoundingClientRect().top},scroll:function(a){var b=this.element.clientHeight>this.element.parentElement.clientHeight,c=this.element.clientWidth>this.element.parentElement.clientWidth;this.element===document.body?b>0&&b>c?this.scrollY(a):c>0&&this.scrollX(a):this.element.scrollHeight>this.element.clientHeight?this.scrollY(a):this.element.scrollWidth>this.element.clientWidth&&this.scrollX(a)},scrollX:function(a){this.element.scrollLeft+=a},scrollY:function(a){this.element.scrollTop+=a},addClass:function(a){var b=this.element.className;b&&-1!==b.indexOf(a)||(""!==b&&(a=" "+a),this.element.className=b+a)},removeClass:function(a){var b=this.element.className,c=new RegExp("\\s?\\b"+a+"\\b","g");b=b.replace(c,""),this.element.className=b},fireEvent:function(a){this.element.dispatchEvent(a)}};var LeapManagerUtils=function(){var a={},b="leap_element_",c=0,d={};return{getLeapElement:function(d){return null==d?null:(d.id||(d.id=b+c++),a[d.id]||(a[d.id]=new LeapElement(d)),a[d.id])},isElementVisible:function(a){for(;a!==document.body.parentNode;){if("0"===LeapManagerUtils.getStyle(a,"opacity")||"none"===LeapManagerUtils.getStyle(a,"display")||"hidden"===LeapManagerUtils.getStyle(a,"visibility"))return!1;a=a.parentNode}return!0},getStyle:function(a,b){return window.getComputedStyle?document.defaultView.getComputedStyle(a)[b]:a.currentStyle?a.currentStyle[b]:void 0},extend:function(a,b){for(var c in b)a[c]=b[c]},extendIf:function(a,b){for(var c in b)b[c]instanceof Object&&b[c].constructor===Object?((void 0===a[c]||null===a[c])&&(a[c]={}),LeapManagerUtils.extendIf(a[c],b[c])):(void 0===a[c]||null===a[c])&&(a[c]=b[c])},exists:function(a){return void 0!==a&&null!==a},bind:function(a,b,c){return function(){c||(c=[]),c=Array.prototype.slice.call(arguments).concat(c),a.apply(b,c)}},map:function(a,b,c,d,e){return a===b?d:(a-b)*(e-d)/(c-b)+d},error:function(a){console.log(a)},testStructure:function(a,b){for(var c,d=0;d<b.length;d++)if(c=b[d],"string"==typeof c){if(!LeapManagerUtils.exists(a[c]))return!1;a=a[c]}return!0},createStructure:function(a,b){for(var c,d=!0,e=0;e<b.length;e++)c=b[e],"string"==typeof c&&(LeapManagerUtils.exists(a[c])||(a=a[c]={},d=!1));return d},distance:function(a,b){var c,d;return c=b.x-a.x,c*=c,d=b.y-a.y,d*=d,Math.sqrt(c+d)},getQueryAll:function(a,b,c){return c?(LeapManagerUtils.exists(d[a])||(d[a]=document.querySelectorAll(b)),d[a]):document.querySelectorAll(b)},getQuery:function(a,b){return LeapManagerUtils.exists(d[a])||(d[a]=document.querySelector(b)),d[a]}}}(),Cursor=function(a){var b="leap-timer-cursor";if(!a)return LeapManagerUtils.error("Cursor#constructor: You must specify a config object."),null;if(!a.source)return LeapManagerUtils.error("Cursor#constructor: You must specify a `source`."),null;if(!a.id)return LeapManagerUtils.error("Cursor#constructor: You must specify a `id`."),null;if(!a.icon)return LeapManagerUtils.error("Cursor#constructor: You must specify a `icon`."),null;if(LeapManagerUtils.extendIf(a,this.defaultConfig),this.source=a.source,this.id=a.id,this.type=a.type,this.icon=a.icon,this.easing=a.easing,this.clickDelay=a.clickDelay,this.multitapEnabled=a.multitapEnabled,this.virtualParent=a.virtualParent||null,this.virtualParent&&(this.type="virtual",this.setElement(this.virtualParent.getElement()),this.virtualParent.addVirtual(this)),this.virtualCursors=[],(0===this.clickDelay||isNaN(this.clickDelay))&&(this.clickDelay=null),this.onTapUpdate=LeapManagerUtils.bind(this._onTapUpdate,this),this.clickDelay&&this.icon.addClass(b),this.icon instanceof HTMLElement&&(this.icon=new LeapElement(this.icon)),a.position){this.update(a.position.x,a.position.y);var c=this.icon.getWidth()/2,d=this.icon.getHeight()/2;this.icon.setX(a.position.x*window.innerWidth+c),this.icon.setY(a.position.y*window.innerHeight+d)}};Cursor.prototype={x:0,y:0,z:0,X:0,Y:0,Z:0,vX:0,vY:0,vZ:0,enabled:!0,captureHost:null,attractor:null,element:null,isTimerRunning:!1,type:"real",startTime:null,animiationIntervalID:null,state:"up",currentClickDelay:0,defaultConfig:{multitapEnabled:!1,clickDelay:0,easing:.3},_tapCapable:!0,_startPoint:null,onAdded:function(){},onRemoved:function(){},setManager:function(a){this.manager=a
},setEnabled:function(a){this.enabled=a},isEnabled:function(){return this.enabled},setElement:function(a){this.element=a},getElement:function(){return this.element},hasElement:function(){return null!==this.element},onElementOver:function(a){this.setElement(a),this.currentClickDelay=this.element.getClickDelay()||this.clickDelay,a.isHoverable()&&a.addClass("hover"),this._tapCapable&&this.manager.isHoverTapEnabled()&&this.currentClickDelay&&a.isTappable()&&this.startTimer()},onElementDown:function(a){a.addClass("leap-down"),this.icon.addClass("cursor-down"),this.state="down"},onElementMove:function(){},onElementUp:function(a){this.state="up",a.removeClass("leap-down"),this.icon.removeClass("cursor-down")},onElementOut:function(a){a.isHoverable()&&a.removeClass("hover"),this.manager.isHoverTapEnabled()&&this.currentClickDelay&&a.isTappable()&&this.stopTimer(),this.setElement(null)},isDown:function(){return"down"===this.state},disableTap:function(){this.element&&(this.element.isHoverable()&&this.element.removeClass("hover"),this.currentClickDelay&&this.element.isTappable()&&this.stopTimer()),this._tapCapable=!1},restartTap:function(){this._tapCapable=!0},setAttractor:function(a){this.attractor=a},hasAttractor:function(){return null!==this.attractor},capture:function(a){this.captureHost=a,this.setAttractor(null)},isCaptured:function(){return null!=this.captureHost},release:function(){this.captureHost=null},update:function(a,b,c){this.setPositionX(a),this.setPositionY(b),this.setPositionZ(c)},setPositionX:function(a){this.X=a-this.x,this.x=a},setPositionY:function(a){this.Y=a-this.y,this.y=a},setPositionZ:function(a){this.Z=a-this.z,this.z=a},getX:function(){return this.x},getY:function(){return this.y},getZ:function(){return this.z},setVelocityXYZ:function(a,b,c){this.setVelocityX(a),this.setVelocityY(b),this.setVelocityZ(c)},setVelocityX:function(a){this.vX=a},setVelocityY:function(a){this.vY=a},setVelocityZ:function(a){this.vZ=a},getVelocityX:function(){return this.vX},getVelocityY:function(){return this.vY},getVelocityZ:function(){return this.vZ},getEasing:function(){return this.easing},fireEvent:function(a){this.element&&this.element.fireEvent.apply(this.element,[a])},startTimer:function(){this.animiationIntervalID&&this.stopTimer(),this.startTime=new Date;var a=this;this.animiationIntervalID=setInterval(function(){a.onTapUpdate()},1e3/30),this.onTimerStart()},stopTimer:function(){clearInterval(this.animiationIntervalID),this.startTime=null,this.onTimerStop()},isVirtual:function(){return"virtual"===this.type},addVirtual:function(a){this.virtualCursors.push(a)},_onTapUpdate:function(){if(!this.startTime)return this.stopTimer(),void 0;var a=new Date,b=a-this.startTime;this.onTimerUpdate(b),b>=this.currentClickDelay&&(this.stopTimer(),this.onTimerComplete())},onTimerStart:function(){this.icon.setStyle({transitionDuration:this.currentClickDelay/1e3+"s"}),this.icon.addClass("active-timer")},onTimerStop:function(){this.icon.setStyle({transitionDuration:"0s"}),this.icon.removeClass("active-timer")},onTimerUpdate:function(){},onTimerComplete:function(){if(this.element)if(this.dispatchDown(),this.dispatchUp(),this.dispatchClick(),this.dispatchTap(),this.multitapEnabled||this.element.hasMultitap()){var a=this;setTimeout(function(){a.startTimer()},100)}else this.release();else this.release()},dispatchOver:function(a){if(a&&this.setElement(a),this.hasElement()){var b=document.createEvent("MouseEvent");b.initMouseEvent("mouseover",!0,!1,window,1,this.icon.getX(),this.icon.getY(),this.icon.getX(),this.icon.getY(),!1,!1,!1,!1,0,this.element),this.element.fireEvent(b),this.onElementOver(this.element)}},dispatchMove:function(a){if(a&&this.setElement(a),this.hasElement()){var b=document.createEvent("MouseEvent");b.initMouseEvent("mousemove",!0,!1,window,1,this.icon.getX(),this.icon.getY(),this.icon.getX(),this.icon.getY(),!1,!1,!1,!1,0,this.element),this.element.fireEvent(b),this.onElementMove(this.element),this.manager.isPressDownEnabled()&&this.element.isTappable()&&(!this.isDown()&&this.getZ()<this.manager.getPressThreshold()?this.dispatchDown(a):this.isDown()&&this.getZ()>this.manager.getPressThreshold()&&this.dispatchUp(a))}},dispatchOut:function(a){if(a&&this.setElement(a),this.hasElement()){var b=document.createEvent("MouseEvent");b.initMouseEvent("mouseout",!0,!1,window,1,this.icon.getX(),this.icon.getY(),this.icon.getX(),this.icon.getY(),!1,!1,!1,!1,0,this.element),this.element.fireEvent(b),this.isDown()&&this.dispatchUp(a,!1),this.onElementOut(this.element)}},dispatchDown:function(a){if(a&&this.setElement(a),this._startPoint={x:this.icon.getX(),y:this.icon.getY()},this.hasElement()){var b=document.createEvent("MouseEvent");b.initMouseEvent("mousedown",!0,!1,window,1,this.icon.getX(),this.icon.getY(),this.icon.getX(),this.icon.getY(),!1,!1,!1,!1,0,this.element),this.element.fireEvent(b),this.onElementDown(this.element)}},dispatchUp:function(a,b){if(LeapManagerUtils.exists(b)||(b=!0),a&&this.setElement(a),this.hasElement()){var c=document.createEvent("MouseEvent");c.initMouseEvent("mouseup",!0,!1,window,1,this.icon.getX(),this.icon.getY(),this.icon.getX(),this.icon.getY(),!1,!1,!1,!1,0,this.element),this.element.fireEvent(c),this.onElementUp(this.element);var d=LeapManagerUtils.distance(this._startPoint,{x:this.icon.getX(),y:this.icon.getY()});b&&d>0&&100>d&&(this.dispatchClick(),this.dispatchTap())}},dispatchClick:function(a){if(a&&this.setElement(a),this.hasElement()){var b=document.createEvent("MouseEvent");b.initMouseEvent("click",!0,!1,window,1,this.icon.getX(),this.icon.getY(),this.icon.getX(),this.icon.getY(),!1,!1,!1,!1,0,this.element),this.element.fireEvent(b)}},dispatchTap:function(a){if(a&&this.setElement(a),this.hasElement()){var b=document.createEvent("UIEvent");b.initUIEvent("tap",!0,!1,window,1,this.icon.getX(),this.icon.getY(),this.icon.getX(),this.icon.getY(),!1,!1,!1,!1,0,this.element),this.element.fireEvent(b)}}};var CursorManager=function(a){if(this.globalInteractiveSelector=".leap-interactive",this.cursorContainerClass="leap-cursor-container",this.leapCursorClass="leap-cursor",this.interactiveSelector=a.interactiveSelector||null,this.untappableSelector=a.untappableSelector||null,this.pressThreshold=a.pressThreshold||0,this.enableHoverTap=a.enableHoverTap===!0,this.enablePressDown=a.enablePressDown===!0,this.greedySelector=a.greedySelector||null,this.cacheAllQueries=a.cacheAllQueries||!1,!this.cursorContainer){this.cursorContainer=new LeapElement(document.createElement("div"));var b=a.root||document.body;b.appendChild(this.cursorContainer.element),this.cursorContainer.addClass(this.cursorContainerClass),this.cursorContainer.setStyle({zIndex:1e5,position:"fixed",top:"0px",left:"0px"})}};CursorManager.prototype={cursorContainer:null,elementLookup:{},mouseEvent:null,interactiveSelector:"",cursorLookup:{},isHoverTapEnabled:function(){return this.enableHoverTap===!0},isPressDownEnabled:function(){return this.enablePressDown===!0},getPressThreshold:function(){return this.pressThreshold||0},get:function(a,b,c){return null==c&&(c="real"),LeapManagerUtils.createStructure(this.cursorLookup,[c,a]),this.cursorLookup[c][a][b]},add:function(a){var b=a.type||"real",c=a.source||"default",d=a.id||0;return LeapManagerUtils.createStructure(this.cursorLookup,[b,c]),LeapManagerUtils.exists(this.cursorLookup[b][c][d])?this.cursorLookup[b][c][d]:(this.cursorLookup[b][c][d]=a,this.cursorContainer.appendChild(a.icon),a.icon.addClass(this.leapCursorClass),a.setManager(this),a.onAdded(),a)},remove:function(a){var b=a.type||"real",c=a.source||"default";if(a.id||0,!a.isVirtual()&&LeapManagerUtils.testStructure(this.elementLookup,[a.source,a.id])){var d=this.elementLookup[a.source][a.id];d&&d.isAttractor()&&(a.setAttractor(null),d.hasCursor()&&d.release()),d&&this.cursorOut(a,d,{x:a.icon.getX(),y:a.icon.getY()}),this.elementLookup[a.source][a.id]=null}for(var e,f=0;f<a.virtualCursors.length;f++)e=a.virtualCursors[f],this.removeVirtualCursor(e);return a.virtualCursors=[],a.setManager(null),a.onRemoved(),LeapManagerUtils.exists(a.icon.getParent())&&this.cursorContainer.removeChild(a.icon),LeapManagerUtils.testStructure(this.cursorLookup,[b,c])&&(this.cursorLookup[b][c][a.id]=null,delete this.cursorLookup[b][c][a.id]),!0},pruneCursors:function(a,b,c){if(LeapManagerUtils.exists(c)||(c="real"),LeapManagerUtils.testStructure(this.cursorLookup,[c,a])){var d,e,f=[];for(e in this.cursorLookup[c][a])d=this.cursorLookup[c][a][e],d instanceof Cursor&&-1===b.indexOf(d.id)&&f.push(d);for(var g=0;g<f.length;g++)this.remove(f[g])}},update:function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p=.1,q=1;for(m in this.cursorLookup)for(n in this.cursorLookup[m])for(o in this.cursorLookup[m][n])if(l=this.cursorLookup[m][n][o],l instanceof Cursor){if(l.isVirtual()){l.icon.setX(l.icon.getX()+l.getVelocityX()),l.icon.setY(l.icon.getY()+l.getVelocityY());continue}if(this.elementLookup[l.source]||(this.elementLookup[l.source]={}),this.elementLookup[l.source][l.id]||(this.elementLookup[l.source][l.id]=null),a={x:Math.round(l.getX()*window.innerWidth),y:Math.round(l.getY()*window.innerHeight)},k=this.elementLookup[l.source][l.id],!l.isEnabled()){k&&(k.isAttractor()&&(l.setAttractor(null),k.hasCursor()&&k.release()),this.cursorOut(l,k),this.elementLookup[l.source][l.id]=null);continue}g=l.icon.getWidth()/2,h=l.icon.getHeight()/2,l.isCaptured()||(l.attractor?(i=l.attractor.element.getBoundingClientRect(),b={x:Math.round(i.left+i.width/2-g),y:Math.round(i.top+i.height/2-h)},c=b.x-l.icon.getX(),d=b.y-l.icon.getY(),e=Math.abs(c/(i.width/2)),f=Math.abs(d/(i.height/2)),e>1&&(e=1),f>1&&(f=1),e=Math.abs(1-e),f=Math.abs(1-f),l.setVelocityXYZ(c*Math.max(p,Math.min(q,e)),d*Math.max(p,Math.min(q,f)),0),Math.abs(l.getVelocityX())<=.1&&Math.abs(l.getVelocityY())<=.1&&(l.setVelocityXYZ(0,0,0),l.icon.setX(b.x),l.icon.setY(b.y),l.attractor.capture(l))):(c=a.x-g-l.icon.getX(),d=a.y-h-l.icon.getY(),l.setVelocityXYZ(c*l.getEasing(),d*l.getEasing()))),l.icon.setX(l.icon.getX()+l.getVelocityX()),l.icon.setY(l.icon.getY()+l.getVelocityY()),k=this.getCollidingElements(a),j=this.elementLookup[l.source][l.id],k&&(null==j&&(this.elementLookup[l.source][l.id]=k,k.isAttractor()&&!k.hasCursor()&&null==l.attractor&&null==l.captureHost&&l.setAttractor(k),this.cursorOver(l,k)),this.cursorMove(l,k)),j&&j!==k&&(j.isAttractor()&&(l.setAttractor(null),j.hasCursor()&&j.release(l)),this.cursorOut(l,j),this.elementLookup[l.source][l.id]=k,k&&(this.cursorOver(l,k),k.isAttractor()&&null==l.attractor&&null==l.captureHost&&(k.hasCursor()||l.setAttractor(k))))}},cursorOver:function(a,b){a.dispatchOver(b)},cursorMove:function(a,b){a.dispatchMove(b)},cursorOut:function(a,b){a.dispatchOut(b)},cursorDown:function(a,b){a.dispatchDown(b)},cursorUp:function(a,b){a.dispatchUp(b)},getCollidingElements:function(a){var b=this.globalInteractiveSelector;"string"==typeof this.interactiveSelector&&this.interactiveSelector.length>0&&(b+=", "+this.interactiveSelector);var c,d,e,f,g,h,i,j=LeapManagerUtils.getQueryAll("interactiveElements",b,this.cacheAllQueries)||[];for(e=j.length-1;e>=0;e--)if(f=j[e],LeapManagerUtils.isElementVisible(f)&&(g=f.getBoundingClientRect(),f=LeapManagerUtils.getLeapElement(f),f&&(c=f.isAttractor()?f.getAttractorPadding().x:0,d=f.isAttractor()?f.getAttractorPadding().y:0,h=a.x>g.left-c&&a.x<g.left+g.width+c,i=a.y>g.top-d&&a.y<g.top+g.height+d,h&&i&&(f.hasRelay()&&(f=LeapManagerUtils.getLeapElement(LeapManagerUtils.getQuery(f.getID()+"-relay",f.getRelay()))),f)))){if(f.isTappable()&&"string"==typeof this.untappableSelector&&this.untappableSelector.length>0){var k=LeapManagerUtils.getQueryAll("untappableElements",this.untappableSelector,this.cacheAllQueries)||[];for(e=0;e<k.length;e++)if(k[e]===f.getElement()){f.setAttribute("leap-disable-tap","true");break}}return f}return null!==this.greedySelector?(f=LeapManagerUtils.getLeapElement(LeapManagerUtils.getQuery("greedySelector",this.greedySelector)),f.hasRelay()&&(f=LeapManagerUtils.getLeapElement(LeapManagerUtils.getQuery(f.getID()+"-relay",f.getRelay()))),f):null},getVirtualCursor:function(a,b){return this.get(a,b,"virtual")},addVirtualCursor:function(a){return this.add(a)},removeVirtualCursor:function(a){return this.remove(a)}};var MouseSimulator=function(){var a="leap-mouse-cursor";return{cursorManager:null,mouseCursor:null,init:function(b,c){this.cursorManager=b;var d=new LeapElement(document.createElement("div"));d.addClass(a);var e={source:"mouse",id:1,icon:d};LeapManagerUtils.extendIf(e,c),this.mouseCursor=new Cursor(e),this.enable()},enable:function(){this._onMouseMove=LeapManagerUtils.bind(this.onMouseMove,this),this._onMouseClick=LeapManagerUtils.bind(this.onMouseClick,this),document.addEventListener("mousemove",this._onMouseMove),document.addEventListener("click",this._onMouseClick),this.cursorManager.add(this.mouseCursor)},disable:function(){this.mouseCursor&&(document.removeEventListener("mousemove",this._onMouseMove),document.removeEventListener("click",this._onMouseClick),this.cursorManager.remove(this.mouseCursor),this.mouseCursor=null)},update:function(a,b,c){this.mouseCursor.update(a,b,c)},onMouseMove:function(a){a=a||window.e;var b=0,c=0,d=0;a.pageX||a.pageY?(b=a.pageX,c=a.pageY):(b=a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,c=a.clientY+document.body.scollTop+document.documentElement.scrollTop),b/=window.innerWidth,c/=window.innerHeight,d=this.currentZ,this.update(b,c,d)},onMouseClick:function(){}}}(),DualSwipe=function(a,b,c){this.firstGesture=a,this.secondGesture=b,this.direction=c,this.type="dual-swipe",this.state="stop"},LeapManager=function(){"use strict";var a="leap-pointable-cursor",b="leap-pointable-virtual-cursor",c="leap-pointable-virtual-scroller-cursor",d="leap",e={maxCursors:1,enableTouchScrolling:!1,enableScrollbarScrolling:!0,enableHoverTap:!0,enablePressDown:!1,pressThreshold:0,simulateWithMouse:!1,enableInBackground:!1,cacheQueries:!0,enableMetaGestures:!0,enableDefaultMetaGestureActions:!0,metaGestureMaxDelay:1200,greedySelector:null,cacheAllQueries:!1,root:null,gestureCallback:null,gestureScope:null,interactiveSelector:null,enableSenchaTouch:!1,boundary:{top:350,left:-100,right:100,bottom:150},touchScrollingConfig:{scrollVector:{x:0,y:1,z:0},scrollMaxSpeed:7,scrollMinSpeed:2,scrollMaxDuration:6},scrollbarScrollingConfig:{resetDelay:1e3,scrollMaxSpeed:7,scrollMinSpeed:2,scrollMaxDuration:6},cursorConfig:{multitapEnabled:!1,clickDelay:1e3},mouseCursorConfig:{multitapEnabled:!1,clickDelay:1e3},loopConfig:{enableGestures:!0}};return{cursorManager:null,gestureHistory:{},init:function(a){LeapManagerUtils.extendIf(a,e),this.boundary=a.boundary,this.maxCursors=a.maxCursors,this.simulateWithMouse=a.simulateWithMouse,this.gestureCallback=a.gestureCallback,this.gestureScope=a.gestureScope,this.cursorConfig=a.cursorConfig,this.enableTouchScrolling=a.enableTouchScrolling,this.touchScrollingConfig=a.touchScrollingConfig,this.enableScrollbarScrolling=a.enableScrollbarScrolling,this.scrollbarScrollingConfig=a.scrollbarScrollingConfig,this.enableMetaGestures=a.enableMetaGestures,this.enableDefaultMetaGestureActions=a.enableDefaultMetaGestureActions,this.metaGestureMaxDelay=a.metaGestureMaxDelay||500,a.enableSenchaTouch&&(null==a.interactiveSelector?a.interactiveSelector="":a.interactiveSelector+=",",a.interactiveSelector+=["a",".x-tab",".x-button",".x-video-ghost",".x-scroll-scroller",".x-list-item"].join(","),a.untappableSelector=[".x-scroll-scroller"].join(", ")),this.cursorManager=new CursorManager({root:a.root,interactiveSelector:a.interactiveSelector,untappableSelector:a.untappableSelector,enableHoverTap:a.enableHoverTap,enablePressDown:a.enablePressDown,pressThreshold:a.pressThreshold,greedySelector:a.greedySelector,cacheAllQueries:a.cacheAllQueries}),this.simulateWithMouse&&MouseSimulator.init(this.cursorManager,a.mouseCursorConfig||{});var b=this;b.isActiveWindow=!0,a.enableInBackground||(window.addEventListener("blur",function(){b.isActiveWindow=!1}),window.addEventListener("focus",function(){b.isActiveWindow=!0}));var c=function(a){b.onLoop(a)};null!==Leap&&Leap.loop(a.loopConfig,c)},onLoop:function(a){this.isActiveWindow&&(this.cursorManager.update(),this.updatePointables(a),this.updateGestures(a))},updatePointables:function(a){var b,c,e,f,g,h,i=[];if(a&&a.pointables)for(c=0;c<a.pointables.length&&c<this.maxCursors;c++)b=a.pointables[c],b&&(f=LeapManagerUtils.map(b.tipPosition[0],this.boundary.left,this.boundary.right,0,1),g=LeapManagerUtils.map(b.tipPosition[1],this.boundary.bottom,this.boundary.top,1,0),h=b.tipPosition[2],e=this.getCursor(b.id,{x:f,y:g,z:h}),i.push(e.id),e.update(f,g,h));this.cursorManager.pruneCursors(d,i)},getCursor:function(b,c){var e=this.cursorManager.get(d,b);if(e)return e;var f=new LeapElement(document.createElement("div"));f.addClass(a);var g={source:d,id:b,position:c,icon:f};return LeapManagerUtils.extend(g,this.cursorConfig),e=new Cursor(g),this.cursorManager.add(e),e},updateGestures:function(e){var f,g=this;e.gestures.length>0&&e.gestures.forEach(function(e){if(e.pointableIds&&e.pointableIds.length>0&&e.pointableIds.forEach(function(h){if(f=g.cursorManager.get(d,h),f instanceof Cursor){if(f.hasElement()){var i=document.createEvent("Event");i.initEvent("leap-"+e.type,!0,!0),i.state=e.state,i.gesture=e,f.element.fireEvent(i),i=document.createEvent("Event"),i.initEvent("leap-"+e.type+"-"+e.state,!0,!0),i.state=e.state,i.gesture=e,f.element.fireEvent(i)}if(g.gestureCallback&&g.gestureCallback.call(g.gestureScope||g,e),(g.enableTouchScrolling||g.enableScrollbarScrolling)&&"circle"===e.type){var j,k={x:LeapManagerUtils.map(e.center[0],g.boundary.left,g.boundary.right,0,1),y:LeapManagerUtils.map(e.center[1],g.boundary.bottom,g.boundary.top,1,0),z:0},l="leap-scroller",m=g.cursorManager.getVirtualCursor(l,e.id);if(g.enableTouchScrolling)if("start"===e.state){f.disableTap(),m&&g.removeVirtualCursor(m);var n=new LeapElement(document.createElement("div"));n.addClass(a),n.addClass(b),n.addClass(c);var o={source:l,id:e.id,position:k,icon:n};o.virtualParent=f,m=new Cursor(o),m.onAdded=function(){this.dispatchDown()},m.onRemoved=function(){this.setVelocityXYZ(0,0,0),this.dispatchUp()},g.cursorManager.addVirtualCursor(m)}else"stop"===e.state&&m?(f.restartTap(),g.cursorManager.removeVirtualCursor(m)):m&&(j=LeapManagerUtils.map(e.duration/1e6,0,g.touchScrollingConfig.scrollMaxDuration,g.touchScrollingConfig.scrollMinSpeed,g.touchScrollingConfig.scrollMaxSpeed),e.normal[2]>0?m.setVelocityXYZ(j*g.touchScrollingConfig.scrollVector.x,j*g.touchScrollingConfig.scrollVector.y,j*g.touchScrollingConfig.scrollVector.z):m.setVelocityXYZ(j*-g.touchScrollingConfig.scrollVector.x,j*-g.touchScrollingConfig.scrollVector.y,j*-g.touchScrollingConfig.scrollVector.z),m.dispatchMove());else if(g.enableScrollbarScrolling)if("start"===e.state){if(LeapManagerUtils.exists(f._lastElementTime)){var p=new Date-f._lastElementTime;p>g.scrollbarScrollingConfig.resetDelay&&(f._scrollElement=f.getElement())}f._lastElementTime=new Date,f.getElement()&&!LeapManagerUtils.exists(f._scrollElement)&&(f._scrollElement=f.getElement()),LeapManagerUtils.exists(f._scrollElement)&&f.disableTap()}else"update"===e.state?LeapManagerUtils.exists(f._scrollElement)&&(f._lastElementTime=new Date,j=LeapManagerUtils.map(e.duration/1e6,0,g.scrollbarScrollingConfig.scrollMaxDuration,g.scrollbarScrollingConfig.scrollMinSpeed,g.scrollbarScrollingConfig.scrollMaxSpeed),e.normal[2]>0?f._scrollElement.scroll(-j):f._scrollElement.scroll(j)):"end"===e.state&&f.restartTap()}}}),g.enableMetaGestures&&"stop"===e.state&&"swipe"===e.type){g.gestureHistory[e.type]instanceof Array||(g.gestureHistory[e.type]=[]),e.timestamp=(new Date).getTime();var h,i,j=0,k=0,l=0,m=!0;for(h=0;(m?2:3)>h;h++)Math.abs(e.direction[h])>j&&(j=Math.abs(e.direction[h]),k=h);if(e._direction=0===k?e.direction[0]>0?"right":"left":1===k?e.direction[1]>0?"up":"down":e.direction[2]>0?"backward":"forward",g.gestureHistory[e.type].push(e),2===g.gestureHistory[e.type].length&&(i=g.gestureHistory[e.type][0],e._direction===i._direction&&(l=e.timestamp-i.timestamp,console.log(l),l<g.metaGestureMaxDelay))){var n=new DualSwipe(e,i,e._direction);g.gestureCallback&&g.gestureCallback.call(g.gestureScope||g,n);var o=document.createEvent("Event");if(o.initEvent("leap-"+n.type,!0,!0),o.state=e.state,o.gesture=n,document.body.dispatchEvent(o),g.enableDefaultMetaGestureActions)switch(n.direction){case"left":history.back();break;case"right":history.forward();break;case"up":break;case"down":}}for(;g.gestureHistory[e.type].length>1;)g.gestureHistory[e.type].shift()}})}}}();